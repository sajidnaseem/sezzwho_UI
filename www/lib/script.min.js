function onUploadingStop(a){1==a&&sezzwhoApp.addbusiness.closePopup()}function checkConnection(){var a=(navigator.connection.type,{});a[Connection.UNKNOWN]="Unknown connection",a[Connection.ETHERNET]="Ethernet connection",a[Connection.WIFI]="WiFi connection",a[Connection.CELL_2G]="Cell 2G connection",a[Connection.CELL_3G]="Cell 3G connection",a[Connection.CELL_4G]="Cell 4G connection",a[Connection.CELL]="Cell generic connection",a[Connection.NONE]="No network connection";var b=navigator.connection.type;b==Connection.NONE?(setTimeout(function(){myApp.hideIndicator(),myApp.hidePreloader()},3e3),myApp.addNotification({title:"Sezzwho",subtitle:"No internet",hold:5e3,message:"Please check your network connection or try again later",media:'<i class="fa fa-chain-broken" aria-hidden="true"></i>'})):b==Connection.WIFI||b==Connection.ETHERNET}function onDeviceReady(){sezzwhoApp.ziggeo.init(),document.addEventListener("backbutton",onBackKeyDown,!1),mainInit.init(),mainInit.rememberMe(),document.addEventListener("offline",onOffline,!1),document.addEventListener("online",onOnline,!1),window.addEventListener("batterycritical",onBatteryCritical,!1);var a=function(a){console.log("notificationOpenedCallback: "+JSON.stringify(a))};window.plugins.OneSignal.startInit("c422207d-3b55-47f4-9158-0a035d044bfe").handleNotificationOpened(a).endInit()}function onOffline(){console.log("offline :"),myApp.addNotification({title:"Sezzwho",subtitle:"No internet",hold:5e3,message:"Please check your network connection or try again later",media:'<i class="fa fa-chain-broken" aria-hidden="true"></i>'})}function onOnline(){}function onBatteryCritical(a){alert("Battery Level Critical "+a.level+"%\nRecharge Soon!")}function onBackKeyDown(){return $$(".modal-in").length>0?(myApp.closeModal(),!1):(mainView.router.back(),!0)}function welcomepages(){var a={bgcolor:"#0da6ec",fontcolor:"#fff",onOpened:function(){console.log("welcome screen opened")},onClosed:function(){console.log("welcome screen closed"),localStorage.welcome=!0}},b=[{id:"slide0",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-01.png" /></div>',text:""},{id:"slide1",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-02.png" /></div>',text:""},{id:"slide2",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-03.png" /></div>',text:""},{id:"slide3",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-04.png" /></div>',text:""},{id:"slide4",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-05.png" /></div>',text:""},{id:"slide5",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-06.png" /></div>',text:""},{id:"slide6",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-07.png" /></div>',text:""},{id:"slide7",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-08.png" /></div>',text:""},{id:"slide8",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-09.png" /></div>',text:""},{id:"slide9",picture:'<div class="tutorialicon"><img src="images/welcome/In-App-Tutorial-480x800-10.png" /></div>',text:'<br><br><a class="tutorial-close-btn" href="#">End Tutorial</a>'}],c=myApp.welcomescreen(b,a);$$(document).on("click",".tutorial-close-btn, .welcomescreen-closebtn",function(){$$(".welcomescreen-container").remove(),localStorage.welcome=!0}),$$(".tutorial-open-btn").click(function(){c.open()}),$$(document).on("click",".tutorial-next-link",function(a){c.next()}),$$(document).on("click",".tutorial-previous-slide",function(a){c.previous()})}function fb_login(a){if(checkConnection(),"connected"===a.status){var b=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.fb_connect,c={key:sezzwhoApp.jsonpcb,access_token:a.authResponse.accessToken,fields:"id,name,first_name,last_name,email,age_range,location,bio,birthday"};$.post(b,c,function(a){console.log(a),"ok"==a.status?(localStorage.setItem("loginuser",a),localStorage.login=!0,sezzwhoApp.cookie=a.cookie,sezzwhoApp.userloginInfo=a,sezzwhoApp.userloginInfo.user.username=a.user_login,mainView.router.load({url:sezzwhoApp.pageUrl+"home.html?count=10",force:!0}),sezzwhoApp.mainInits=mainInit,sezzwhoApp.personalFeeds.init(sezzwhoApp.userloginInfo.user.id),sezzwhoApp.notifications.init(),sezzwhoApp.mainInits.initUserInfoTemplate(a),myApp.hideIndicator(),$$(".sezzwho-profile-menu, .sezzwho-setting-menu, .sezzwho-change-password-menu, .sezzwho-about-menu, .sezzwho-logout-menu").show(),$$(".sezzwho-login-menu,.sezzwho-registration-menu, .sezzwho-lost-password-menu").hide(),localStorage.usrname=a.user_login,localStorage.pass=a.password,localStorage.chkbx="remember-me",localStorage.fbLogin=!0,$("#my-form2").hide()):(myApp.addNotification({title:"Login Error",subtitle:"Face Book",hold:5e3,message:a.error,media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}),$("#my-form2").show(3e3))})}}function captureSuccess(a){var b,c;for(b=0,c=a.length;b<c;b+=1)uploadFile(a[b])}function captureError(a){var b="An error occurred during capture: "+a.code;navigator.notification.alert(b,null,"Uh oh!")}function captureVideo(){var a={limit:1,duration:30,quality:0};navigator.device.capture.captureVideo(captureSuccess,captureError,a)}function uploadFile(a){var b=new FileTransfer,c=a.fullPath,d=a.name;progressBar(b);var e=new FileUploadOptions;e.fileName=d,e.mimeType="video/mp4",b.upload(c,sezzwhoApp.uploadPath,function(a){sezzwhoApp.progressID.html("Completed"),console.log("Upload success: "+a.responseCode);var b=JSON.parse(a.response);video_code='<ziggeo ziggeo-width="320" ziggeo-height="240" ziggeo-responsive="true" ziggeo-video="'+b.ziggeo.token+'"></ziggeo>';var c={};if(c[0]=$$("#videocontent"),"whats-new"===sezzwhoApp.recordingType)c[1]=$("#aw-whats-new-submit,#add-business,#post-business"),c[1].prop("disabled",!1);else if("comments"===sezzwhoApp.recordingType)c[1]=$$("#post-comment"),c[1].prop("disabled",!1);else if("whats-record"===sezzwhoApp.recordingType){var d="http://embed.ziggeo.com/v1/applications/ddd4366d3fc0baef95c333fa575c53f9/videos/"+b.ziggeo.token+"/video.mp4",e="http://embed.ziggeo.com/v1/applications/ddd4366d3fc0baef95c333fa575c53f9/videos/"+b.ziggeo.token+"/image";$("#re-change-image").attr("poster",e),$("#re-change-video").attr("src",d)}c[2]=$$("#videobusiness"),c[0].val(video_code),c[2].val(b.ziggeo.token)},function(a){console.log("Error uploading file "+c+": "+a.code)},e)}function progressBar(a){"whats-new"===sezzwhoApp.recordingType?sezzwhoApp.progressID=$$(".demo-progressbar-load-hide p:first-child"):"comments"===sezzwhoApp.recordingType?sezzwhoApp.progressID=$$(".comment-progressbar-load-hide p:first-child"):"whats-record"==sezzwhoApp.recordingType&&(sezzwhoApp.progressID=$$(".record-progressbar-load-hide p:first-child")),a.onprogress=function(a){if(a.lengthComputable){var b=Math.floor(a.loaded/a.total*100);myApp.showProgressbar(sezzwhoApp.progressID,b),99==b&&myApp.showProgressbar(sezzwhoApp.progressID,100)}else sezzwhoApp.progressID.html("Completed")}}function getPhoto(a){navigator.camera.getPicture(onPhotoURISuccess,onFail,{destinationType:destinationType.FILE_URI,mediaType:Camera.MediaType.VIDEO,sourceType:a})}function onPhotoURISuccess(a){console.log(a)}function onFail(a){console.log(a)}function videoCaptureSuccess(a){var b=(a[0],"video-name-here");VideoEditor.transcodeVideo(videoTranscodeSuccess,videoTranscodeError,{fileUri:a.fullPath,outputFileName:b,outputFileType:VideoEditorOptions.OutputFileType.MPEG4,optimizeForNetworkUse:VideoEditorOptions.OptimizeForNetworkUse.YES,saveToLibrary:!0,maintainAspectRatio:!0,width:640,height:640,videoBitrate:1e6,audioChannels:2,audioSampleRate:44100,audioBitrate:128e3,progress:function(a){console.log("transcodeVideo progress callback, info: "+a)}})}function videoTranscodeSuccess(a){console.log("videoTranscodeSuccess, result: "+a)}function videoTranscodeError(a){console.log("videoTranscodeError, err: "+a)}function star_rating(){var a=jQuery,b=a(".already-rated .activity-read-more");a(b).removeClass("activity-read-more").addClass("already-rated-read-more"),a(".star").mouseover(function(){for(var b=a(this).attr("id").substr(4,a(this).attr("id").length),c=1;c<=b;c++)a("#star"+c).attr("src","images/star.png")}),a("div#review-rating").mouseout(function(){for(var b=1;b<=5;b++)a("#star"+b).attr("src","images/star_off.png")}),a(".star").click(function(){for(var b=a(this).attr("id").substr(4,a(this).attr("id").length),c=1;c<=5;c++)a("#star"+c).attr("src","images/star_off.png");for(var c=1;c<=b;c++)a("#star"+c).attr("src","images/star.png");a(".star").unbind("mouseover"),a("div#review-rating").unbind("mouseout"),a("input#rating").attr("value",b)}),a("#submit").click(function(){if(0==a("input#rating").val())return alert("Please Rate for This page/post !!!"),!1})}function onNotificationAPN(a){if(a.alert&&navigator.notification.alert(a.alert),a.sound){var b=new Media(a.sound);b.play()}a.badge&&pushNotification.setApplicationIconBadgeNumber(successHandler,errorHandler,a.badge)}function onNotification(a){switch(a.event){case"registered":a.regid.length>0&&(console.log("regID = "+a.regid),sezzwhoApp.notifications.deviceRegister(a.regid,"android_notification"));break;case"message":if(a.foreground){var b=a.soundname||a.payload.sound,c=new Media("/android_asset/www/"+b);c.play(),sezzwhoApp.notifications.getNotification()}else a.coldstart?sezzwhoApp.notifications.getNotification():sezzwhoApp.notifications.getNotification();break;case"error":}}var i18n={app:{name:"HiApp"},global:{cancel:"Cancel",send:"Send",back:"Back",done:"Done",search:"Search",modal_title:"System",modal_button_ok:"OK",minute_ago:" mins ago",hour_ago:" hours ago",day_ago:" days ago",just_now:"Just now",language:"Language",switch_language:"Switching languages"},index:{nothing_found:"No matching results",nothing_loaded:"Nothing loaded",tweet:"Tweet",contacts:"Contacts",setting:"Setting",sen_tweet:"New Tweet",send_placeholder:"What is new with you.",sending:"Submitting...",err_text_too_short:"Ah,Content is too short"},setting:{feed_back:"Feedback",feed_back_placeholder:"Hi,Any suggestions to tell us?",feed_back_result:"Thank you for your feedback",check_update:"Update",about:"About",login_out:"Log out",nickname:"Name",points:"Points",confirm_logout:"Are you sure to log out?",current_version:"The current version is "},login:{loginname_placeholder:"Email/Username",password_placeholder:"Password",login_btn:"Sign In",sign_up:"Sign Up",forgot_pwd:"Forgot password",err_empty_input:"Please enter login name and password",err_illegal_email:"Username must be Email",login:"Loading, please wait..."},timeline:{forward:"Forward",comment:"Comment",like:"Like"},item:{title:"Tweet"},comment:{reply:"Reply",reply_comment:"Reply",copy_comment:"Copy",placeholder:"Write a comment ...",empty_comment:"No one comments",commenting:"Submitting..."},chat:{title:"Message",chatPlaceholder:"Message"},geo:{loading_geo:"Getting your geo info...",permission_denied:"Permission denied",position_unavailable:"Position unavailable",timeout:"Getting timeout",confirm_clean_geo:"You will clear geo info"},camera:{image_uploading:"Uploading pictures",confirm_clear_image:"Are you sure clear the selected pictures？",file_not_found_err:"Upload file not found",invalid_url_err:"Invalid url",connection_err:"Connection error",abort_err:"Abort upload",not_modified_err:"Not modified"},error:{unknown_error:"Unknown error",no_network:"No network connection",phonegap_only:"PhoneGap Only"}};Framework7.prototype.plugins.welcomescreen=function(a,b){"use strict";var c,d=Dom7,e=Template7;d(document).on("click",".close-welcomescreen",function(a){a.preventDefault();var b=d(this).parents(".welcomescreen-container");b.length>0&&b[0].f7Welcomescreen&&b[0].f7Welcomescreen.close()}),c=function(b,c){function f(){n=new Swiper(".swiper-container",{direction:"horizontal",loop:c.loop,pagination:c.pagination?o.find(".swiper-pagination"):void 0})}function g(){c.bgcolor&&m.css({"background-color":c.bgcolor,color:c.fontcolor})}function h(){k='<div class="welcomescreen-container {{#if options.cssClass}}{{options.cssClass}}{{/if}}">{{#if options.closeButton}}<div class="welcomescreen-closebtn close-welcomescreen">{{options.closeButtonText}}</div>{{/if}}<div class="welcomescreen-swiper swiper-container"><div class="swiper-wrapper">{{#each slides}}<div class="swiper-slide" {{#if id}}id="{{id}}"{{/if}}>{{#if content}}<div class="welcomescreen-content">{{content}}</div>{{else}}{{#if picture}}<div class="welcomescreen-picture">{{picture}}</div>{{/if}}{{#if text}}<div class="welcomescreen-text">{{text}}</div>{{/if}}{{/if}}</div>{{/each}}</div>{{#if options.pagination}}<div class="welcomescreen-pagination swiper-pagination"></div>{{/if}}</div></div>'}function i(){var a;c=c||{};for(a in q)"undefined"==typeof c[a]&&(c[a]=q[a])}function j(){c.template?l=e.compile(c.template):(a._compiledTemplates.welcomescreen||(a._compiledTemplates.welcomescreen=e.compile(k)),l=a._compiledTemplates.welcomescreen)}var k,l,m,n,o,p=this,q={closeButton:!0,closeButtonText:"Skip",cssClass:"",pagination:!0,loop:!1,open:!0};return p.open=function(){m=d(l({options:c,slides:b})),o=m.find(".swiper-container"),g(),d("body").append(m),f(),m[0].f7Welcomescreen=p,"function"==typeof c.onOpened&&c.onOpened()},p.close=function(){n&&n.destroy(!0),m&&m.remove(),m=o=n=void 0,"function"==typeof c.onClosed&&c.onClosed()},p.next=function(){n&&n.slideNext()},p.previous=function(){n&&n.slidePrev()},p.slideTo=function(a){n&&n.slideTo(a)},function(){h(),j(),i(),c.open&&p.open()}(),p},a.welcomescreen=function(a,b){return new c(a,b)}};var isAndroid=Framework7.prototype.device.android===!0,isIos=Framework7.prototype.device.ios===!0;Template7.global={android:isAndroid,ios:isIos};var myApp=new Framework7({modalTitle:"SEZZWHO",precompileTemplates:!0,pushState:!0,swipeBackPage:!isAndroid,swipePanelCloseOpposite:!0,animateNavBackIcon:!0,swipePanel:!!isAndroid&&"left",material:!!isAndroid,materialPageLoadDelay:0,statusbarOverlay:!isAndroid,fastClicksDistanceThreshold:20,fastClicksDelayBetweenClicks:50,notificationTitle:"Sezzwho",notificationSubtitle:"",notificationHold:3e3,template7Pages:!0,fastClicks:!0,preloader:!1,modalActionsTemplate:$("script#actions-modal-custom").html(),materialPreloaderHtml:'<span class="preloader-inner"><span class="preloader-inner-gap"></span><span class="preloader-inner-left"><span class="preloader-inner-half-circle"></span></span><span class="preloader-inner-right"><span class="preloader-inner-half-circle"></span></span></span>'}),limit=10,page=1,cookie={},count=10,homeModule="",retrievedObject="",activityData="",userloginInfo,pictureSource,destinationType,$$=Dom7,mainView=myApp.addView(".view-main",{dynamicNavbar:!0,domCache:!0});myApp.onPageInit("about",function(a){"use strict";$$(".create-page").on("click",function(){createContentPage()})}),mainView.hideToolbar();var sezzwhoApp=myApp;sezzwhoApp.uploadlimit="78643200",sezzwhoApp.embedding="",sezzwhoApp.url="https://sezzwho.com/api/userplus/",sezzwhoApp.pageUrl="pages/android/",sezzwhoApp.uploadPath="http://sezzwho.wowfactormedia.ca/wp-content/plugins/mobileAppSezzwho/upload.php",sezzwhoApp.homeUrl="https://sezzwho.com/wp-admin/admin-ajax.php?",sezzwhoApp.lostPasswordUrl="http://sezzwho.com/wp-login.php?action=lostpassword",sezzwhoApp.isUploading=!1,sezzwhoApp.isUploaded=!1,sezzwhoApp.postButton=!1,sezzwhoApp.addLocationButton=!1,sezzwhoApp.addReviewButton=!1,sezzwhoApp.autoWhatsNew=!1,sezzwhoApp.isStillUploading=!1,sezzwhoApp.uploadToken="",sezzwhoApp.baseUrl="https://sezzwho.com/",sezzwhoApp.googleServerKey="AIzaSyBZVeN2VJIqZrM196M1rrlRpoJF9MRN6tQ",sezzwhoApp.jsonpcb="jsonpCallbackSezzWhoApp8513467259",sezzwhoApp.notificationsOptions="ac_notifier,activity,ditto,refer,follow",sezzwhoApp.ziggeoUrl="http://embed.ziggeo.com/v1/applications/ddd4366d3fc0baef95c333fa575c53f9/videos/",sezzwhoApp.sezzwhoAction={generate_auth_cookie:"generate_auth_cookie",validate_auth_cookie:"validate_auth_cookie",activities:"activities",xprofile:"xprofile",following:"following_activities",activities_post_update:"activities_post_update",notifications_unread_count:"notifications_unread_count",notifications:"notifications",notifications_delete:"notifications_delete",notifications_single_mark:"notifications_single_mark",activities_post_update_review:"activities_post_update_review",activities_new_comment:"activities_new_comment",retrieve_password:"retrieve_password",members:"members",get_refer_user_count:"get_refer_user_count",sz_add_user_ditte:"sz_add_user_ditte",following_follower:"following_follower",sz_single_activity_post:"sz_single_activity_post",activities_delete_activity:"activities_delete_activity",activities_post_update:"activities_post_update",delete_comment:"delete_comment",add_follow_button:"add_follow_button",xprofile_update:"xprofile_update",email_exists:"email_exists",username_exists:"username_exists",register:"register",update_user_meta_vars:"update_user_meta_vars",refreshed:"refresh_activities",settings_update_notifications:"settings_update_notifications",avatar_upload:"avatar_upload",fb_connect:"fb_connect",save_device_id:"save_device_id",update_password:"update_password",sezzwho_share_count:"sezzwho_share_count",sz_following_list:"sz_following_list",sz_follower_list:"sz_follower_list"};var b_init=$$(".button.get-storage-data");b_init.on("click",function(a){myApp.showIndicator();var b=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.generate_auth_cookie,c={username:$$(".sezzwho-username").val(),password:$$(".sezzwho-password").val(),key:sezzwhoApp.jsonpcb};checkConnection(),$.post(b,c,function(a){"ok"==a.status?(localStorage.setItem("loginuser",a),sezzwhoApp.cookie=a.cookie,sezzwhoApp.userloginInfo=a,mainView.router.load({url:sezzwhoApp.pageUrl+"home.html?count=10",force:!0}),sezzwhoApp.mainInits=mainInit,sezzwhoApp.personalFeeds.init(sezzwhoApp.userloginInfo.user.id),sezzwhoApp.notifications.init(),sezzwhoApp.mainInits.initUserInfoTemplate(a),myApp.hideIndicator(),$$(".sezzwho-profile-menu,.sezzwho-change-password-menu, .sezzwho-setting-menu,.sezzwho-about-menu, .sezzwho-logout-menu").show(),$$(".sezzwho-login-menu,.sezzwho-registration-menu, .sezzwho-lost-password-menu").hide(),localStorage.userLoggedIn=!0,localStorage.setItem("fbLogin",!1),localStorage.usrname=$(".sezzwho-username").val(),localStorage.pass=$(".sezzwho-password").val(),localStorage.chkbx=$("#remember_me").val(),$("#my-form2").hide()):(myApp.hideIndicator(),$(".alert.alert-danger").text(a.error),$("#my-form2").show(3e3),$("#remember_me").removeAttr("checked"))})}),myApp.onPageInit("home",function(){$$(".tab-link.userprofile").on("click",function(a){}),$$(".open-popup-record").on("click",function(){if(console.log("e"),myApp.popup(".popup-record"),sezzwhoApp.searchs.init(),sezzwhoApp.addbusiness.init(),star_rating(),sezzwhoApp.isStillUploading&&$$(".popup-record.modal-in").length>0)return setTimeout(function(){myApp.addNotification({title:"Uploading...",message:isAndroid?"Stay tuned, uploading....":'Stay tuned, uploading....<a href="#"><span class="color-red">Cancel upload</span></a>',button:{text:"Cancel upload",color:"red",close:!0},hold:5e3,onClose:function(){isAndroid?navigator.notification.confirm("Do you want to stop video uploading?",onUploadingStop,"Stop uploading",["Yes","No"]):""},onClick:function(){isAndroid?"":navigator.notification.confirm("Do you want to stop video uploading?",onUploadingStop,"Stop uploading",["Yes","No"])}}),myApp.closeModal(".popup-record")},1e3),!1}),$$(".close-popup").on("click",function(){}),$$(".window-minimize").on("click",function(){if($$(".popup-record.modal-in").length>0)return myApp.closeModal(".popup-record"),!1})}),$(document).ready(function(){window.isphone=!1,document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1&&(window.isphone=!0),window.isphone?document.addEventListener("deviceready",onDeviceReady,!1):onDeviceReady()});var login=function(){if(!window.cordova){var a=prompt("Enter FB Application ID","");facebookConnectPlugin.browserInit(a)}facebookConnectPlugin.login(["email"],function(a){fb_login(a),console.log(JSON.stringify(a))},function(a){$("#my-form2").show()})},showDialog=function(){facebookConnectPlugin.showDialog({method:"feed"},function(a){alert(JSON.stringify(a))},function(a){alert(JSON.stringify(a))})},apiTest=function(){facebookConnectPlugin.api("me/?fields=id,email,age_range,picture",["user_birthday"],function(a){alert(JSON.stringify(a))},function(a){alert(JSON.stringify(a))})},getAccessToken=function(){facebookConnectPlugin.getAccessToken(function(a){alert(JSON.stringify(a))},function(a){alert(JSON.stringify(a))})},getStatus=function(){facebookConnectPlugin.getLoginStatus(function(a){console.log(JSON.stringify(a)),fb_login(a)},function(a){alert(JSON.stringify(a)),setTimeout(function(){myApp.hideIndicator()},3e3),$("#my-form2").show()})},logout=function(){facebookConnectPlugin.logout(function(a){console.log(JSON.stringify(a))},function(a){setTimeout(function(){myApp.hideIndicator()},3e3),$("#my-form2").show(),console.log(JSON.stringify(a))})};$$(".sezzwho-social-menu").on("click",function(){var a=sezzwhoApp.baseUrl+"/invites/",b=cordova.InAppBrowser.open(a,"_blank","location=yes");b.addEventListener("loadstart",function(){myApp.showIndicator()}),b.addEventListener("loadstop",function(){myApp.hideIndicator()})});var activityTemplate=$("script#comment-ziggeo-template").html(),userHeaderTemplate=$("script#user-profile-template").html(),notificationTemplate=$("script#notification-template").html(),commentTemplate=$("script#comment-template").html(),searchTemplate=$("script#search-results-template").html(),profileTemplate=$("script#profile-template").html(),popularTemplate=$("script#popular-video-template").html(),followingTemplate=$("script#following-list-template").html(),followerTemplate=$("script#follower-list-template").html(),pushNotification,push,page=1,limit=10,comments=!1,cookie="",loginUserID,mainInit={init:function(){var a=this;this.bindEvent(),$$(document).on("pageBeforeInit",function(b){var c=b.detail.page;a.pageBeforeInit(c)}),$$(document).on("pageAfterAnimation",function(b){var c=b.detail.page;a.pageAfterAnimation(c)}),$$(document).on("pageBack",function(b){var c=b.detail.page;a.pageBack(c)})},pageAfterAnimation:function(a){a.name,a.from},pageBeforeInit:function(a){var b=a.name,c=a.query,d=a.context;switch(checkConnection(),b){case"home":homeModule.init(c),sezzwhoApp.popularVideos.init(),sezzwhoApp.searchs.init(),sezzwhoApp.commonFunc.refreshAll(),"Android"==device.platform||"android"==device.platform?sezzwhoApp.notifications.registerDeviceAndroid():sezzwhoApp.notifications.registerDeviceIOS();break;case"comment":sezzwhoApp.showIndicator(),comments.init(c);break;case"detailPage":sezzwhoApp.showIndicator(),detailpage.init(c),sezzwhoApp.searchs.init();break;case"message":messageModule.init(c);break;case"business":sezzwhoApp.addbusiness.autoComplete(d),sezzwhoApp.addbusiness.init();break;case"single":sezzwhoApp.singlePage.init(c);break;case"profile":sezzwhoApp.profiles.init();break;case"register":sezzwhoApp.registers.init();break;case"setting":sezzwhoApp.settings.init();break;case"videodetail":videodetail.init(d);break;case"accountsetting":sezzwhoApp.settings.bindEvent(),sezzwhoApp.settings.initPasswordValidate();break;case"lostPassword":sezzwhoApp.lostPasswords.init();break;case"following":sezzwhoApp.showIndicator(),sezzwhoApp.searchs.bindEvent(),sezzwhoApp.followingList.init(c);break;case"follower":sezzwhoApp.showIndicator(),sezzwhoApp.searchs.bindEvent(),sezzwhoApp.followerList.init(c);break;case"default":}},pageBack:function(a){"undefined"!=typeof a.query.id&&(sezzwhoApp.userIDetail=a.query.id,$("#tab-detial").show());var b=a.name;switch(b){case"home":isAndroid?navigator.app.exitApp():($$(".sezzwho-profile-menu, .sezzwho-setting-menu, .sezzwho-change-password-menu, .sezzwho-about-menu, .sezzwho-logout-menu").hide(),$$(".sezzwho-login-menu,.sezzwho-registration-menu, .sezzwho-lost-password-menu").show(),sezzwhoApp.mainInits.restLocalStorage(),$("#my-form2").show("slow"));break;case"default":}},getRemoteAvatar:function(a){return"http://lorempixel.com/68/68/people/"+a},getUserCookies:function(){return retrievedObject=localStorage.getItem("userlogin")},displayResult:function(a,b){},renderTpl:function(a,b){var c=Template7.compile(a);return c(b)},getsezzwhoContents:function(a){var b={},c={},d={},e={};return c=a.match(/ziggeo-video=(.*?)><\/ziggeo>/),e=a.match(/<div class="videotitle">(.*?)<\/div>/),d=a.match(/<div class="hashtags">(.*?)<\/div>/),null===c&&(c={},c[1]=""),null===e&&(e={},e[0]=""),null===d&&(d={},d[0]=""),b={ziggeoCode:c[1].slice(1,33),title:e[0],hashtag:d[0]}},stripHTML:function(){var a=/<\S[^><]*>/g;for(i=0;i<arguments.length;i++)arguments[i].value=arguments[i].value.replace(a,"")},rememberMe:function(){localStorage.chkbx&&""!=localStorage.chkbx?($("#remember_me").attr("checked","checked"),$(".sezzwho-username").val(localStorage.usrname),$(".sezzwho-password").val(localStorage.pass),mainInit.checkLoginStatus()):($("#remember_me").removeAttr("checked"),$("#pass").val(""),$("#my-form2").show("slow"),"true"!==localStorage.welcome&&welcomepages()),$("#remember_me").click(function(){$("#remember_me").is(":checked")?(localStorage.usrname=$(".sezzwho-username").val(),localStorage.pass=$(".sezzwho-password").val(),localStorage.chkbx=$("#remember_me").val()):(localStorage.usrname="",localStorage.pass="",localStorage.chkbx="")})},checkLoginStatus:function(){"true"==localStorage.userLoggedIn&&""!=localStorage.userLoggedIn?($("#my-form2").hide(),b_init.click()):"true"==localStorage.fbLogin&&""!=localStorage.fbLogin?($("#my-form2").hide(),myApp.showIndicator(),getStatus()):$("#my-form2").show(3e3)},checkWelcomeTutorial:function(){},clearCache:function(){var a=function(a){console.log("Message: "+a)},b=function(a){console.log("Error: "+a)};window.cache.clear(a,b)},countFormat:function(a){var b;return b=a>999&&a<=999999?Math.floor(10*a/1e3)/10+"K":a>999999?Math.floor(10*a/1e6)/10+"M":a},getHashTags:function(a){var b,c,d,e,f;for(f=a.split(/[\s\r\n]+/),b=[],c=0,d=f.length;c<d;c++)e=f[c],0!==e.indexOf("#")&&0!==e.indexOf("@")||b.push(e);return b},initUserInfoTemplate:function(a){$(".whats-new-info").text("What's new, "+sezzwhoApp.userloginInfo.user.username+"?"),$(".recored-facebook-avatar img").attr("src",sezzwhoApp.userloginInfo.user.avatar)},activities:function(a,b,c){var d,e=[],f=[],g=[],h=0,i="",j='<br><br><div class="none-comment"><i class="fa fa-newspaper-o  fa-5x"></i><p>No Activities</p></div>';if(("error"===a.status||"No Activities found."===a.error)&&"refresh"!==c)return sezzwhoApp.hideIndicator(),$(".load-result").html(j),$$(".infinite-scroll-preloader").remove(),!1;if(("error"===a.status||"No Activities found."===a.error)&&"refresh"===c)return sezzwhoApp.hideIndicator(),!1;for(b&&(d=sezzwhoApp.activityData.activities.length);h<a.activities.length;)g=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[h].content),i=g.title,i=i.replace(/\\/g,""),b?(sezzwhoApp.activityData.activities[d+h]=a.activities[h],sezzwhoApp.activityData.page=a.page,sezzwhoApp.activityData.page=a.page,sezzwhoApp.activityData.has_more_items=a.has_more_items):(sezzwhoApp.activityData=a,sezzwhoApp.refreshTime=a.activities[0].time),f[h]={nickname:a.activities[h].user[0].username,avatar:sezzwhoApp.mainInits.addhttp(a.activities[h].user[0].avatar),user_id:a.activities[h].user[0].user_id,time:a.activities[h].time_since,title:i,hashtag:g.hashtag,ziggeocode:g.ziggeoCode,type:"Member_review"==a.activities[h].type||"activity_update"==a.activities[h].type,commentLenght:"undefined"!=typeof a.activities[h].comments?a.activities[h].comments.length:0,comments:"undefined"!=typeof a.activities[h].comments,page:a.page,id:a.activities[h].activity_id,action:a.activities[h].action,name:"following",star:a.activities[h].star,likes_count:"string"==typeof a.activities[h].likes_count?0:Object.keys(a.activities[h].likes_count).length,like_button:a.activities[h].likes_button,refer_count:a.activities[h].refer_count,web_link:""!==a.activities[h].web_link&&sezzwhoApp.mainInits.matchUrl(a.activities[h].web_link),location:a.activities[h].location===!0&&sezzwhoApp.mainInits.mapUrl(a.activities[h].address),share_count:a.activities[h].share_count,is_follow:a.activities[h].followCheck,account_type:a.activities[h].user[0].account_type},h++;e.push({item:f});var k=sezzwhoApp.mainInits.renderTpl(activityTemplate,e[0]);"refresh"!==c?($(".load-result").append(k),1==$(".load-result .none-comment").length&&$(".load-result .none-comment").remove()):(0!==a.activities.lenght&&(sezzwhoApp.refreshTime=a.activities[0].time),$(".load-result").prepend(k)),myApp.hideIndicator(),sezzwhoApp.commonFunc.init()},allLinkUpdate:function(a){sezzwhoApp.activityData=a},timeFormat:function(a){function b(a){return a<10?"0"+a:a}a=1e3*a;var c,d,e,f,g=(new Date).getTime(),h=(g-a)/1e3;if(f=Math.round(h/86400),e=Math.round(h/3600),d=Math.round(h/60),c=Math.round(h),f>0&&f<2)return f+i18n.global.day_ago;if(f<=0&&e>0)return e+i18n.global.hour_ago;if(e<=0&&d>0)return d+i18n.global.minute_ago;if(d<=0&&c>=0)return i18n.global.just_now;var i=new Date;return i.setTime(a),i.getFullYear()+"-"+b(i.getMonth()+1)+"-"+b(i.getDate())+" "+b(i.getHours())+":"+b(i.getMinutes())},getCharLength:function(a){for(var b=0,c=0;c<a.length;c++)b+=a.charCodeAt(c)>255?2:1;return b},matchUrl:function(a){var b=/((http|ftp|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&;:\/~\+#]*[\w\-\@?^=%&;\/~\+#])?/g;return a=a.replace(b,function(a){return a.indexOf("http")!==-1||a.indexOf("ftp")!==-1||a.indexOf("https")!==-1?'<a href="#" onclick="cordova.InAppBrowser.open(\''+a+"','_blank','location=yes')\">click here for web</a>":'<a href="#" onclick="cordova.InAppBrowser.open(\'http://'+a+"','_blank','location=yes')\">click here for web</a>"})},addhttp:function(a){return/^(f|ht)tps?:\/\//i.test(a)||(a="http://"+a),a},getAge:function(a){var b=new Date,c=new Date(a),d=b.getFullYear()-c.getFullYear(),e=b.getMonth()-c.getMonth();return(e<0||0===e&&b.getDate()<c.getDate())&&d--,d},mapUrl:function(a){return'<a href="#" onclick="cordova.InAppBrowser.open(\'https://www.google.ca/maps/place/'+a+"/','_blank','location=no')\">find us on google maps</a>"},sezzwhoLogout:function(){console.log("logout"),myApp.showIndicator(),mainView.router.load({pageName:"index"}),window.location.reload(),$$(".sezzwho-profile-menu, .sezzwho-setting-menu, .sezzwho-change-password-menu, .sezzwho-about-menu, .sezzwho-logout-menu").hide(),$$(".sezzwho-login-menu,.sezzwho-registration-menu, .sezzwho-lost-password-menu").show(),logout(),sezzwhoApp.mainInits.restLocalStorage(),"android"==device.platform||"Android"==device.platform||"amazon-fireos"==device.platform?sezzwhoApp.notifications.unregisterDeviceAndroid():sezzwhoApp.notifications.unregisterDeviceIos(),setTimeout(function(){myApp.hideIndicator()},3e3)},bindEvent:function(){var a=[{element:".sezzwho-logout-menu",event:"click",handler:mainInit.sezzwhoLogout}];mainInit.bindEvents(a)},restLocalStorage:function(){localStorage.setItem("userLoggedIn",!1),localStorage.setItem("pass",""),localStorage.setItem("chkbx",""),localStorage.setItem("fbLogin",!1)},bindEvents:function(a){for(var b in a)a[b].selector?$$(a[b].element).on(a[b].event,a[b].selector,a[b].handler):$$(a[b].element).on(a[b].event,a[b].handler)}},sxhr={simpleCall:function(a,b,c,d){var e=a+b;$.post(e,c,function(a){switch(sezzwhoApp.xhrs.data=a,d){case"activities":sezzwhoApp.mainInits.activities(a,!1,"activity"),sezzwhoApp.homeModules.loadmoreContent();break;case"loadmoreActivity":sezzwhoApp.mainInits.activities(a,!0,"more"),console.log("loadmoreActivities");break;case"refreshActivity":sezzwhoApp.mainInits.activities(a,!0,"refresh");break;case"login":break;case"profile":sezzwhoApp.personalFeeds.getPersonalFeed(a);break;case"personalFeed":sezzwhoApp.personalFeeds.activitiesFeed(a,!1),sezzwhoApp.checkPersonalRefresh&&sezzwhoApp.personalFeeds.loadmoreFeedContent();
break;case"loadmoreFeedActivity":sezzwhoApp.personalFeeds.activitiesFeed(a,!0),console.log("loadmoreActivities");break;case"detialpageheader":sezzwhoApp.detailpages.getPersonalFeed(a);break;case"detialpagelist":sezzwhoApp.detailpages.activitiesFeed(a),sezzwhoApp.detailpages.loadmoreFeedContent();break;case"loadmoreDetailActivity":sezzwhoApp.detailpages.activitiesFeed(a);break;case"reviewpagelist":sezzwhoApp.reviewpages.activitiesReviewFeed(a),sezzwhoApp.reviewpages.loadmoreFeedContent();break;case"loadmoreReviewActivity":sezzwhoApp.reviewpages.activitiesReviewFeed(a);break;case"postUpdate":sezzwhoApp.personalFeeds.response_post_update(a);break;case"postBusinessReview":sezzwhoApp.addbusiness.doneReview(a);break;case"postComment":sezzwhoApp.comments.doneComments(a);break;case"unreadCount":sezzwhoApp.notifications.displayCount(a);break;case"notification":sezzwhoApp.notifications.displayNotifications(a);break;case"allUpdate":sezzwhoApp.mainInits.allLinkUpdate(a);break;case"comments":sezzwhoApp.comments.displayJsonComments(a,!1),sezzwhoApp.comments.loadmoreContent();break;case"comment_edit_delete_activity":sezzwhoApp.comments.displayEditDeleteMessage(a);break;case"loadmoreComment":sezzwhoApp.comments.displayJsonComments(a,!0);break;case"searchResult":sezzwhoApp.searchs.displayResult(a);break;case"refer":sezzwhoApp.commonFunc.displayReferResult(a);break;case"follower":sezzwhoApp.commonFunc.displayCountFollower(a);break;case"activityCount":sezzwhoApp.commonFunc.displayCountActivity(a);break;case"notificationCount":sezzwhoApp.commonFunc.displayCountNotification(a);break;case"singlePage":sezzwhoApp.singlePage.displayActivity(a);break;case"activities_edit_delete_activity":sezzwhoApp.commonFunc.displayEditDeleteMessage(a);break;case"notifications_delete":sezzwhoApp.notifications.notifications_delete_message(a);break;case"notifications_mark":sezzwhoApp.notifications.notifications_mark_message(a);break;case"following_unfollowing_button":break;case"popular_video":sezzwhoApp.popularVideos.displayVideo(a);break;case"changePassword":sezzwhoApp.settings.responseUpdatePassword(a);break;case"shareCount":sezzwhoApp.commonFunc.reponseShareCount(a);break;case"followingList":sezzwhoApp.followingList.displayFollowingList(a),sezzwhoApp.followingList.loadmore();break;case"followingLoadMore":sezzwhoApp.followingList.displayFollowingList(a);break;case"followerList":sezzwhoApp.followerList.displayFollowerList(a),sezzwhoApp.followerList.loadmore();break;case"followerLoadMore":sezzwhoApp.followerList.displayFollowerList(a);break;default:console.log("error")}})},multipleCall:function(){}};sezzwhoApp.xhrs=sxhr;var commonFunc={init:function(){this.blindEvent(),this.guesterFunc()},ziggeoGetStream:function(a){var b=".activity-"+sezzwhoApp.shareWidgetId,c=sezzwhoApp.baseUrl+$$(b).find(".share-link").val();try{sezzwhoApp.ziggeoStreamsUrl=a.streams[2].token,videoUrl=sezzwhoApp.ziggeoUrl+a.token+"/streams/"+sezzwhoApp.ziggeoStreamsUrl+"/video.mp4",console.log(videoUrl),setTimeout(function(){window.plugins.socialsharing.share($$(b).find(".videotitle").text(),"SEZZWHO",videoUrl,c,sezzwhoApp.commonFunc.shareSuccessCallback,sezzwhoApp.commonFunc.SareerrorCallback)},300)}catch(d){videoUrl=sezzwhoApp.ziggeoUrl+a.token+"/video.mp4",window.plugins.socialsharing.share($$(b).find(".videotitle").text(),"SEZZWHO",videoUrl,c,sezzwhoApp.commonFunc.shareSuccessCallback,sezzwhoApp.commonFunc.SareerrorCallback),console.log(videoUrl)}},shareWidget:function(){sezzwhoApp.showPreloader();var a=$(this).data("arg");sezzwhoApp.shareWidgetId=a.id,sezzwhoApp.ZiggeoSdk.Videos.get(a.video,sezzwhoApp.commonFunc.ziggeoGetStream)},shareActionWidget:function(a){sezzwhoApp.showPreloader();sezzwhoApp.shareWidgetId=a.id,sezzwhoApp.ZiggeoSdk.Videos.get(a.video,sezzwhoApp.commonFunc.ziggeoGetStream)},shareCommentWidget:function(a){sezzwhoApp.showPreloader();var b,c;b=$(a).data("arg"),b.videoCheck?sezzwhoApp.ZiggeoSdk.Videos.get(b.video,sezzwhoApp.commonFunc.ziggeoGetStream):(c="file:///android_asset/www/"+b.image,setTimeout(function(){window.plugins.socialsharing.share(b.text,"SEZZWHO",c,sezzwhoApp.baseUrl,sezzwhoApp.commonFunc.shareSuccessCallback,sezzwhoApp.commonFunc.SareerrorCallback)},300))},shareSuccessCallback:function(){sezzwhoApp.hidePreloader();var a=id=".activity-"+sezzwhoApp.shareWidgetId;$(a).find(".share-count").text(sezzwhoApp.mainInits.countFormat(parseInt($(a).find(".share-count-hidden").val())+1)).first().text(),$(a).find(".share-count-hidden").val(parseInt($(a).find(".share-count-hidden").val())+1);var b=$(a).find(".share-count-hidden").val();sezzwhoApp.ziggeoStreamsUrl="";var c={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,activity_id:sezzwhoApp.shareWidgetId,count:b};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.sezzwho_share_count,c,"shareCount")},ShareerrorCallback:function(){sezzwhoApp.hidePreloader(),console.log("Error")},reponseShareCount:function(a){console.log(a)},videoPlayer:function(){var a=$$(this).attr("data-url");VideoPlayer.play(a,{volume:.5,scalingMode:VideoPlayer.SCALING_MODE.SCALE_TO_FIT},function(a){console.log(a)})},refreshAll:function(){$$(".refreshAll").on("click",function(){$$(".fa.fa-refresh").addClass("fa-spin"),sezzwhoApp.checkPersonalRefresh=!1,sezzwhoApp.notifications.notifications_unread_count(),sezzwhoApp.notifications.getNotification(),sezzwhoApp.homeModules.refreshActivities(),sezzwhoApp.personalFeeds.getFeedActivities(),sezzwhoApp.popularVideos.getPopularVideo(),setTimeout(function(){$$(".fa.fa-refresh").removeClass("fa-spin")},5e3)})},activity_like:function(){var a="",b="",c="";a=$$(this),b=a.attr("data-id"),options={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,activity_id:b},c=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.sz_add_user_ditte,b=".activity-"+b;var d=b+" span.likes";$(d).each(function(){$(this).prop("Counter",100).animate({Counter:0},{duration:500,easing:"swing",step:function(a){$(this).text(Math.ceil(a))}})}),$.post(c,options,function(a){"Ditto"===a.text?($(b).find("span.ditto").text(a.text),console.log(b),"undefined"==typeof a.response?$(b).find(".likes").text("0"):$(b).find(".likes").text(sezzwhoApp.mainInits.countFormat(a.response)),$(b).find(".fa.ditto").addClass("fa-thumbs-o-up").removeClass("fa-thumbs-up")):($(b).find("span.ditto").text(a.text),"undefined"==typeof a.response?$(b).find(".likes").text("0"):$(b).find(".likes").text(sezzwhoApp.mainInits.countFormat(a.response)),$(b).find(".fa.ditto").addClass("fa-thumbs-up").removeClass("fa-thumbs-o-up")),console.log(a)})},referActivity:function(a){sezzwhoApp.referId=a,mainView.router.load({url:sezzwhoApp.pageUrl+"refer.html",force:!0}),setTimeout(function(){sezzwhoApp.searchs.searchuser(),sezzwhoApp.commonFunc.init()},1e3)},postRefer:function(){var a={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,refer:$("#autocomplete-user .item-after").text(),activity_id:sezzwhoApp.referId};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.get_refer_user_count,a,"refer")},displayReferResult:function(a){var b=$(".activity-"+sezzwhoApp.referId);b.find(".refer").text(sezzwhoApp.mainInits.countFormat(a.count)),1==a.notification_status&&myApp.addNotification({title:"Refer",hold:7e3,subtitle:"",message:"Sorry, you already refered him/her",media:'<i class="fa fa-info-circle"></i>'}),mainView.router.back()},deletePost:function(a,b){if(a==sezzwhoApp.userloginInfo.user.id){var c={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,activity_id:b};sezzwhoApp.deleteActivity=b,sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_delete_activity,c,"activities_edit_delete_activity")}else myApp.addNotification({title:"Un-authorized",hold:7e3,subtitle:"",message:"Sorry, you are not authorized to delete this video",media:'<i class="fa fa-info-circle"></i>'})},editPost:function(a,b){a==sezzwhoApp.userloginInfo.user.id?(sezzwhoApp.editID=b,requirejs(["build/editvideo/editvideo"],function(a){a.initEdit()}),myApp.popup(".popup-re-record")):myApp.addNotification({title:"Un-authorized",subtitle:"",message:"Sorry, you are not authorized to edit this video",media:'<i class="fa fa-info-circle"></i>'})},displayEditDeleteMessage:function(a){var b="#activity-"+sezzwhoApp.deleteActivity+", #popular-"+sezzwhoApp.deleteActivity;"ok"===a.status&&$$(b).remove()},followingFollower:function(a){var b={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,user_id:a};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following_follower,b,"follower")},displayCountFollower:function(a){sezzwhoApp.follower=a.follower,sezzwhoApp.following=a.following,sezzwhoApp.is_follow=a.check},guesterFunc:function(){},lostSezzwhoPassword:function(){var a=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.retrieve_password,b={key:sezzwhoApp.jsonpcb,user_login:$("#user_login").val()};$.post(a,b,function(a){1==jQuery(a).find("#login_error").length?myApp.addNotification({title:"Error",hold:5e3,message:'<span class="color-red"><strong>ERROR</strong>: Enter a username or email address.</span>',media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}):myApp.addNotification({title:"Successful",hold:5e3,subtitle:"",message:'<span class="color-lighgreen">Check your email for the confirmation link.</span>',media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'})})},activitiesCount:function(a){var b={key:sezzwhoApp.jsonpcb,user_id:a,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",comments:!0,limit:1e4};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,b,"activityCount")},displayCountActivity:function(a){"undefined"!=typeof a.error?sezzwhoApp.activityCount=0:sezzwhoApp.activityCount=a.activities.length},displayCountNotification:function(a){var b=$("i.fa.fa-flag span");if(0==a.count){var c='<div class="none-comment"><i class="fa fa-exclamation-triangle fa-5x"></i><p>No New Notifications</p></div>';$(".notification-template").html(c),b.text(a.count)}else b.text(a.count)},animateValue:function(a,b,c,d){var e=c-b,f=b,g=c>b?1:-1,h=Math.abs(Math.floor(d/e)),i=document.getElementById(a),j=setInterval(function(){f+=g,i.innerHTML=f,f==c&&clearInterval(j)},h)},init_action_menu:function(){var a,b,c,d,e=[];a=$$(this),sezzwhoApp.actionMenu=[],sezzwhoApp.actionMenu.activity_id=a.attr("data-activityid"),sezzwhoApp.actionMenu.user_id=a.attr("data-userid"),d=a.attr("data-items"),e=d,parseItem=JSON.parse(d),console.log(parseItem.action);var f=[{text:"Sezzwho",label:!0},{text:'<i class="fa fa-minus-square-o"></i> Delete',bold:!0,color:"red",onClick:function(){sezzwhoApp.commonFunc.deletePost(c,b)}},{text:'<i class="fa fa-pencil-square-o"></i> Edit',bold:!0,color:"lightgreen",onClick:function(){sezzwhoApp.commonFunc.editPost(c,b)}},{text:'<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Report',bold:!0,color:"orange",onClick:function(){cordova.plugins.email.isAvailable(function(a){alert("Service is not available")}),cordova.plugins.email.addAlias("gmail","com.google.android.gm"),cordova.plugins.email.open({app:"gmail",subject:"Sent from Gmail"})}}],g=[{text:"Cancel",color:"red"}],h=[{data:parseItem,items:!0,loginUser:sezzwhoApp.userloginInfo.user.id}],i=[f,g,h];myApp.actions(i)},actionButtons:function(a){if("share"===a){myApp.closeModal();var b=$(event.target).data("arg");sezzwhoApp.commonFunc.shareActionWidget(b)}else if("close"===a)myApp.closeModal();else if("edit"===a)myApp.closeModal(),sezzwhoApp.commonFunc.editPost(sezzwhoApp.actionMenu.user_id,sezzwhoApp.actionMenu.activity_id);else if("delete"===a)myApp.closeModal(),sezzwhoApp.commonFunc.deletePost(sezzwhoApp.actionMenu.user_id,sezzwhoApp.actionMenu.activity_id);else if("report"===a)sezzwhoApp.addNotification({hold:5e3,title:"Report",message:"Thanks, We will get back to you soon!"}),sezzwhoApp.commonFunc.actionButtons("close");else if("follow"===$(a).attr("data-type")){var c=a,d=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.add_follow_button,e={key:sezzwhoApp.jsonpcb,user_id:$(c).attr("data-id"),cookie:sezzwhoApp.cookie},f=c;console.log($(c).attr("data-id")),"startfollow active-state"===$(c).find("span").attr("class")||"startfollow"===$(c).find("span").attr("class")?($(c).find("span i").attr("class","fa fa-spinner fa-spin"),$.get(d,e,function(a){1==a.response&&($(f).find("span").html('<i class="fa fa-user-times"></i> Following'),$(f).find("span").addClass("stopfollow").removeClass("startfollow"),myApp.addNotification({hold:5e3,title:"Follow",message:"You are following",media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}))})):($(this).find("span i").attr("class","fa fa-spinner fa-spin"),e["delete"]=!0,$.get(d,e,function(a){0==a.response&&($(f).find("span").html('<i class="fa fa-user-plus"></i> follow'),$(f).find("span").addClass("startfollow").removeClass("stopfollow"),myApp.addNotification({hold:5e3,title:"Following",message:"You are un following",media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}))}))}},turnOnPost:function(){$("#auto-post-business").hide(),$("#auto-aw-whats-new-submit, #auto-add-business").show()},switchPostUpdate:function(a){},blindEvent:function(){var a=[{element:".share-button",event:"click",handler:this.shareWidget},{element:".share-button-comment",event:"click",handler:this.shareCommentWidget},{element:".action-menu",event:"click",handler:this.init_action_menu},{element:".play-video",event:"click",handler:this.videoPlayer},{element:".activity-like",event:"click",handler:this.activity_like},{element:"#refer-user",event:"click",handler:this.postRefer},{elemet:"#wp-submit",event:"click",handler:this.lostPassword},{element:".open-popup-record",event:"click",handler:this.turnOnPost},{element:".auto-post",event:"click",handler:this.switchPostUpdate}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.commonFunc=commonFunc;var loadmore=!1,feeds={init:function(a){this.userProfileHeader(a),this.bindEvent(),sezzwhoApp.checkPersonalRefresh=!0},userProfileHeader:function(a){var b={key:sezzwhoApp.jsonpcb,user_id:a,cookie:sezzwhoApp.cookie,field:"Bio,Website,Address"},c=new Promise(function(a,b){a(sezzwhoApp.commonFunc.followingFollower(sezzwhoApp.userloginInfo.user.id))});c.then(function(){sezzwhoApp.commonFunc.activitiesCount(sezzwhoApp.userloginInfo.user.id)}).then(function(){sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.xprofile,b,"profile")}),sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.notifications_unread_count,b,"notificationCount"),this.getFeedActivities()},getPersonalFeed:function(a){var b=a.Bio,c=a.Website,d=a.Address,e={avatar:sezzwhoApp.mainInits.addhttp(sezzwhoApp.userloginInfo.user.avatar),bio:b.substring(0,122),id:sezzwhoApp.userloginInfo.user.id,username:sezzwhoApp.userloginInfo.user.username,follower:a.followers,following:a.following,post_count:a.activityCount,is_follow:a.is_follow,address:d,website:sezzwhoApp.mainInits.addhttp(c),follow:!0},f=sezzwhoApp.mainInits.renderTpl(userHeaderTemplate,e);$(".user-profile-header").html(f)},getFeedActivities:function(){var a={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userloginInfo.user.id,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",comments:!0,scope:"just-me,mentions"};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,a,"personalFeed")},activitiesFeed:function(a,b){var c=[],d=[],e=[],f="",g='<div class="none-comment"><i class="fa fa-newspaper-o  fa-5x"></i><p>No Activities</p></div>';if("error"!==a.status){for(var h=0;h<a.activities.length;h++)e=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[h].content),f=e.title,f=f.replace(/\\/g,""),sezzwhoApp.activityFeedData=a,d[h]={nickname:a.activities[h].user[0].display_name,avatar:sezzwhoApp.mainInits.addhttp(a.activities[h].user[0].avatar),user_id:a.activities[h].user[0].user_id,time:a.activities[h].time_since,title:f,hashtag:e.hashtag,ziggeocode:e.ziggeoCode,type:"Member_review"==a.activities[h].type||"activity_update"==a.activities[h].type,commentLenght:"undefined"!=typeof a.activities[h].comments?a.activities[h].comments.length:0,comments:"undefined"!=typeof a.activities[h].comments,page:a.page,id:a.activities[h].activity_id,action:a.activities[h].action,name:"personal",star:a.activities[h].star,likes_count:"string"==typeof a.activities[h].likes_count?0:Object.keys(a.activities[h].likes_count).length,like_button:a.activities[h].likes_button,refer_count:a.activities[h].refer_count,web_link:sezzwhoApp.mainInits.matchUrl(a.activities[h].web_link),location:a.activities[h].location===!0&&sezzwhoApp.mainInits.mapUrl(a.activities[h].address),share_count:a.activities[h].share_count,is_follow:a.activities[h].followCheck,account_type:a.activities[h].user[0].account_type};c.push({item:d});var i=sezzwhoApp.mainInits.renderTpl(activityTemplate,c[0]);1==b?$(".presonal-content").append(i):$(".presonal-content").html(i),this.bindEvent(),myApp.hideIndicator(),sezzwhoApp.commonFunc.init()}else $(".presonal-content").html(g),sezzwhoApp.activityFeedData=[],sezzwhoApp.activityFeedData.has_more_items=!1,myApp.detachInfiniteScroll($$(".infinite-scroll-personal")),$$(".infinite-scroll-preloader-personal-page").remove()},loadmoreFeedContent:function(){var a=!1,b=sezzwhoApp.activityFeedData.has_more_items,c=10,d=2;loadmore=!0,$$(".infinite-scroll-personal").on("infinite",function(){a||(a=!0,setTimeout(function(){if(a=!1,b=sezzwhoApp.activityFeedData.has_more_items,0==b)return myApp.detachInfiniteScroll($$(".infinite-scroll-personal")),void $$(".infinite-scroll-preloader-personal-page").remove();var e={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userloginInfo.user.id,cookie:sezzwhoApp.cookie,page:d,per_page:c};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,e,"loadmoreFeedActivity"),1==sezzwhoApp.activityFeedData.has_more_items?(d+=1,b=!0):b=!1},1e3))})},post_update:function(a,b,c){var d={content:a,key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,rating:b,link:c};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_post_update,d,"postUpdate")},response_post_update:function(a){console.log(a),"ok"==a.status?(myApp.addNotification({title:"Sezzwho",subtitle:"Post Updated",message:'Post updated successfully<a href="#"><span class="color-indigo"> SHARE ME</span></a>',media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">',hold:7e3,button:{text:"close",color:"red",close:!0},onClick:function(){var b=sezzwhoApp.baseUrl+"/members/"+sezzwhoApp.userloginInfo.user.username+"/activity/"+a.activity_id;window.plugins.socialsharing.share("SEZZWHO is aimed at reviewing the products and services you love.",null,null,b)}}),this.getFeedActivities(),sezzwhoApp.homeModules.refreshActivities(),sezzwhoApp.popularVideos.getPopularVideo(),sezzwhoApp.addbusiness.closePopup()):myApp.addNotification({title:"Sezzwho",subtitle:"Notification subtitle",message:a.error,media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'})},recordVideo:function(a){sezzwhoApp.recordingType=a,captureVideo()},initPostData:function(){var a,b="",c="",d="",e="",f="";return""==$$("#video-title").val()?$("#video-title").addClass("danger-alert"):$("#video-title").removeClass("danger-alert"),""==$("#autocomplete-user").val()?$("#autocomplete-user").addClass("danger-alert"):$("#autocomplete-user").removeClass("danger-alert"),b='<div class="videotitle">'+$$("#video-title").val()+"</div>",d=$$("#rating").val(),d<3?(myApp.alert("please select more than 3 star"),!1):(c=$$("#videocontent").val(),f=$("#autocomplete-user").val().replace(/["~!$%^&*\(\)_+=`{}\[\]\|\\:;'<>,.\/?"\-]+/g,"").match(/(?:\#(\w+))|(?:\@(\w+))/g).toString().replace(/,/g," "),f='<div class="hashtags">'+f+"</div>",a=b+c+f,e=$$("#autocomplete-website").val(),void(d?sezzwhoApp.personalFeeds.post_update(a,d,e):alert("Opps, Please give a rating / oh, do not  forget a hashtag")))},initAutoPostData:function(){var a="",b="",c="";if(sezzwhoApp.postButton=!0,sezzwhoApp.addLocationButton=!1,sezzwhoApp.addReviewButton=!1,""==$$("#video-title").val()?$("#video-title").addClass("danger-alert"):$("#video-title").removeClass("danger-alert"),""==$("#autocomplete-user").val()?$("#autocomplete-user").addClass("danger-alert"):$("#autocomplete-user").removeClass("danger-alert"),a='<div class="videotitle">'+$$("#video-title").val()+"</div>",b=$$("#rating").val(),b<3)return myApp.alert("please select more than 3 star!"),!1;if(c=sezzwhoApp.mainInits.getHashTags($("#autocomplete-user").val()),""==c)return myApp.alert("please enter hash/at sign before word!"),!1;if(c=$("#autocomplete-user").val().replace(/["~!$%^&*\(\)_+=`{}\[\]\|\\:;'<>,.\/?"\-]+/g,"").match(/(?:\#(\w+))|(?:\@(\w+))/g).toString().replace(/,/g," "),c='<div class="hashtags">'+c+"</div>",""==$("#video-title").val()||""==c||b<3||!sezzwhoApp.isUploading)sezzwhoApp.autoWhatsNew=!1;else if(sezzwhoApp.isUploaded)sezzwhoApp.autoWhatsNew=!1,sezzwhoApp.personalFeeds.initPostData(),$("#auto-aw-whats-new-submit i").addClass("fa-spinner fa-spin  fa-fw").removeClass("fa-pencil"),setTimeout(function(){$("#auto-aw-whats-new-submit i").removeClass("fa-spinner fa-spin  fa-fw").addClass("fa-pencil")},3e3);else if(sezzwhoApp.autoWhatsNew=!0,$("#auto-aw-whats-new-submit i").addClass("fa-spinner fa-spin  fa-fw").removeClass("fa-pencil"),setTimeout(function(){$("#auto-aw-whats-new-submit i").removeClass("fa-spinner fa-spin  fa-fw").addClass("fa-pencil")},3e3),$$(".popup-record.modal-in").length>0)return myApp.closeModal(".popup-record"),sezzwhoApp.isStillUploading=!0,myApp.addNotification({title:"Uploading...",message:"Stay tuned, uploading....",hold:3e3}),!1},mentionUser:function(){myApp.autocomplete({input:"#autocomplete-user",openIn:"dropdown",expandInput:!0,preloader:!0,backOnSelect:!0,valueProperty:"user_id",textProperty:"username",limit:20,source:function(a,b,c){var d=[];return 0===b.length?void c(d):(a.showPreloader(),void $$.ajax({url:sezzwhoApp.url+"members",method:"GET",dataType:"json",data:{search_terms:b,key:sezzwhoApp.jsonpcb},success:function(b){for(var e=0;e<b.members.length;e++)d.push(b.members[e].username);a.hidePreloader(),c(d)}}))}})},bindEvent:function(){var a=[{element:"#aw-whats-new-submit",event:"click",handler:this.initPostData},{element:"#auto-aw-whats-new-submit",event:"click",handler:this.initAutoPostData}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.personalFeeds=feeds;var homeModule={init:function(a){mainView.showToolbar(),this.getActivities(a),this.refreshContentFollowing(),sezzwhoApp.homeModules.blindEvent()},getActivities:function(a){var b={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userloginInfo.user.id,cookie:sezzwhoApp.cookie,following:!0,type:"activity_update,Member_review",comments:!0};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,b,"activities")},loadmoreContent:function(){var a=!1,b=sezzwhoApp.activityData.has_more_items,c=10,d=2;$$(".infinite-scroll-following").on("infinite",function(){a||(a=!0,setTimeout(function(){if(a=!1,b=sezzwhoApp.activityData.has_more_items,0==b)return myApp.detachInfiniteScroll($$(".infinite-scroll-following")),void $$(".infinite-scroll-preloader-following").remove();var e={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userloginInfo.user.id,cookie:sezzwhoApp.cookie,following:!0,page:d,per_page:c,type:"activity_update,Member_review"};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,e,"loadmoreActivity"),1==sezzwhoApp.activityData.has_more_items?(d+=1,b=!0):b=!1},1e3))})},refreshActivities:function(){var a={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userloginInfo.user.id,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",comments:!0,self_following:!0,time:sezzwhoApp.refreshTime};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.refreshed,a,"refreshActivity")},refreshContentFollowing:function(){var a=$$(".pull-to-refresh-content");a.on("ptr:refresh",function(a){setTimeout(function(){sezzwhoApp.homeModules.refreshActivities(),sezzwhoApp.notifications.notifications_unread_count(),sezzwhoApp.notifications.getNotification(),myApp.pullToRefreshDone()},2e3)})},refreshTimelineByClick:function(){$$("#homeView .refresh-click").find("i").addClass("fa-spin"),setTimeout(function(){$$("#homeView .refresh-click").find("i").removeClass("fa-spin")},1500),$$("#homeView .pull-to-refresh-content").scrollTop(0,300),sezzwhoApp.pullToRefreshTrigger("#homeView .pull-to-refresh-content")},startStopFollowing:function(){var a=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.add_follow_button,b={key:sezzwhoApp.jsonpcb,user_id:$(this).attr("data-type"),cookie:sezzwhoApp.cookie},c=this;console.log($(this).attr("data-type")),"startfollow active-state"===$(this).find("span").attr("class")||"startfollow"===$(this).find("span").attr("class")?($(this).find("span i").attr("class","fa fa-spinner fa-spin"),$.get(a,b,function(a){1==a.response&&($(c).find("span").html('<i class="fa fa-user-times"></i> Following'),$(c).find("span").addClass("stopfollow").removeClass("startfollow"),myApp.addNotification({hold:5e3,title:"Follow",message:"You are following",media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}))})):($(this).find("span i").attr("class","fa fa-spinner fa-spin"),b["delete"]=!0,$.get(a,b,function(a){0==a.response&&($(c).find("span").html('<i class="fa fa-user-plus"></i> follow'),$(c).find("span").addClass("startfollow").removeClass("stopfollow"),myApp.addNotification({hold:5e3,title:"Following",message:"You are un following",media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}))}))},responseFollowerFollowing:function(){},blindEvent:function(){var a=[{element:".follow-button",event:"click",handler:this.startStopFollowing}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.homeModules=homeModule;var type="",text_id_status="";Template7.registerHelper("json_stringify",function(a){return JSON.stringify(a)});var allComments,comments={init:function(a){setTimeout(function(){sezzwhoApp.comments.bindEvent(),sezzwhoApp.commonFunc.blindEvent()},1500),console.log(a),sezzwhoApp.comments.singlePage=!0,this.getJsonComments(a),$$("#comment-id").val(a.id),sezzwhoApp.commentsType=[{id:a.id,type:a.name,page:a.page,user_id:a.user_id}]},getJsonComments:function(a){var b={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,type:"activity_comment",sort:"DESC",primary_id:a.id,secondary_id:a.id,comments:!1};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,b,"comments")},displayJsonComments:function(a,b){var c=[],d=[],e=$(".loadComments");if(sezzwhoApp.commentsData=a,"error"!==a.status){for(var f=0;f<a.activities.length;f++){var g=a.activities[f].content,h="<ziggeo",i=!1,j="",k="";if(i=g.indexOf(h)===-1){j=a.activities[f].content,j=j.replace(/\\/g,"");var l=j;j=sezzwhoApp.mainInits.matchUrl(j)}text=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[f].content),k=text.title,k=k.replace(/\\/g,""),d[f]={nickname:a.activities[f].user[0].username,avatar:sezzwhoApp.mainInits.addhttp(a.activities[f].user[0].avatar),user_id:a.activities[f].user[0].user_id,time:a.activities[f].time_since,title:k,text_comment:i,text_content:j,text_share_content:l,hashtag:text.hashtag,ziggeocode:text.ziggeoCode,commentLenght:"undefined"!=typeof a.activities[f].children?a.activities[f].children:0,id:a.activities[f].activity_id,action:a.activities[f].action,likes_count:"string"==typeof a.activities[f].likes_count?0:Object.keys(a.activities[f].likes_count).length,like_button:a.activities[f].likes_button,account_type:a.activities[f].user[0].account_type,share_count:a.activities[f].share_count}}c.push({item:d}),console.log(f);var m=sezzwhoApp.mainInits.renderTpl(commentTemplate,c[0]);sezzwhoApp.post_comment?(e.prepend(m),sezzwhoApp.post_comment=!1,setTimeout(function(){sezzwhoApp.comments.bindEvent()},1500)):(e.append(m),setTimeout(function(){sezzwhoApp.comments.bindEvent()},1500)),1==$(".loadComments .none-comment").length&&$(".loadComments .none-comment").remove(),1==a.activities.length&&(myApp.detachInfiniteScroll($$(".infinite-scroll-comment")),$$(".infinite-scroll-preloader-comment-page").remove())}else if(b===!0)$$(".infinite-scroll-preloader-comment-page").remove();else{$$(".infinite-scroll-preloader-comment-page").remove();var n='<div class="none-comment"><i class="fa fa-comments-o fa-5x"></i><p>No one comments</p></div>';e.html(n)}sezzwhoApp.hideIndicator()},loadmoreContent:function(){var a=!1,b=sezzwhoApp.commentsData.has_more_items,c=2,d=2;$$(".infinite-scroll").on("infinite",function(){a||(a=!0,setTimeout(function(){if(a=!1,b=sezzwhoApp.commentsData.has_more_items,0==b)return myApp.detachInfiniteScroll($$(".infinite-scroll-comment")),void $$(".infinite-scroll-preloader-comment-page").remove();var e={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,type:"activity_comment",sort:"DESC",primary_id:sezzwhoApp.commentsType[0].id,secondary_id:sezzwhoApp.commentsType[0].id,page:d,per_page:c,comments:!1};sezzwhoApp.post_comment=!1,sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,e,"loadmoreComment"),console.log(sezzwhoApp.commentsData.has_more_items),console.log(d),1==sezzwhoApp.commentsData.has_more_items?(d+=1,b=!0):b=!1},1e3))})},getComments:function(a){var b,c,d=[];c=parseInt(a.page-1+a.index);var e=$(".loadComments");switch(a.name){case"following":"true"===a.comment?d.push(sezzwhoApp.activityData.activities[c]):(b="No Comment Yet",e.html(b),myApp.hideIndicator());break;case"detailpage":"true"===a.comment?d.push(sezzwhoApp.activityFeedUserDetail.activities[c]):(b="No Comment Yet",e.html(b),sezzwhoApp.hideIndicator());break;case"personal":console.log(a.name),"true"===a.comment?d.push(sezzwhoApp.activityFeedData.activities[c]):(b="No Comment Yet",e.html(b),sezzwhoApp.hideIndicator());break;default:console.log("error")}},displayComment:function(a,b){var c=[],d=[];a=a[0].comments;for(var e=0;e<a.length;e++)text=sezzwhoApp.mainInits.getsezzwhoContents(a[e].content),d[e]={nickname:a[e].display_name,avatar:a[e].avatar,user_id:a[e].user_id,time:a[e].time_since,title:text.title,hashtag:text.hashtag,ziggeocode:text.ziggeoCode,id:a[e].activity_id,action:a[e].action};c.push({item:d});var f=sezzwhoApp.mainInits.renderTpl(commentTemplate,c[0]);b.html(f),sezzwhoApp.hideIndicator()},closePicker:function(){$$(".comment-progressbar-load-hide").html('<p style="height:2px"></p>'),$$(".record-input").val(""),$$("#review-rating img").attr("src","images/star_off.png"),$$("#post-comment").attr("disabled","disabled"),myApp.closeModal(".picker-1")},initPost:function(){var a,b="";b=$$("#videocontent").val(),a=b,a?(sezzwhoApp.comments.post_comment(a),sezzwhoApp.showPreloader("Submitting..."),setTimeout(function(){sezzwhoApp.hidePreloader(),sezzwhoApp.closeModal(".picker-1")},1500)):alert("please re-record the video!")},post_comment:function(a){var b={content:a,key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,activity_id:parseInt(sezzwhoApp.commentsType[0].id),receiver_id:parseInt(sezzwhoApp.commentsType[0].user_id)};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_new_comment,b,"postComment")},doneComments:function(a){sezzwhoApp.post_comment=!0;var b=".activity-"+sezzwhoApp.commentsType[0].id;b=$$(b);var c=parseInt(b.find(".comment-count-hidden").val()),d=c+1;if(c=sezzwhoApp.mainInits.countFormat(c+1),"ok"===a.status){b.find(".comment").text(c.toString()),b.find(".comment-count-hidden").val(d);var e={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,type:"activity_comment",sort:"DESC",primary_id:sezzwhoApp.commentsType[0].id,secondary_id:sezzwhoApp.commentsType[0].id,limit:1,include:a.comment_id,comments:!1};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,e,"comments"),sezzwhoApp.comments.closePicker()}console.log(a)},initRecording:function(){sezzwhoApp.personalFeeds.recordVideo("comments")},deleteComment:function(){var a=$(this).attr("data-id"),b=$(this).attr("data-userid");if(b==sezzwhoApp.userloginInfo.user.id){
var c={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,activity_id:a};sezzwhoApp.deleteActivity=a,sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_delete_activity,c,"comment_edit_delete_activity");var d=".activity-"+sezzwhoApp.commentsType[0].id;d=$$(d);var e=parseInt(d.find(".comment-count-hidden").val());e-=1;var f=sezzwhoApp.mainInits.countFormat(e);e<0&&(e=0),d.find(".comment").text(f.toString()),d.find(".comment-count-hidden").val(e)}else myApp.addNotification({title:"Un-authorized",subtitle:"",message:"Sorry, you are not authorized to delete this video or comment",media:'<i class="fa fa-info-circle"></i>'})},displayEditDeleteMessage:function(a){var b="#comment-"+sezzwhoApp.deleteActivity;"ok"===a.status&&($$(b).remove(),sezzwhoApp.personalFeeds.getFeedActivities())},dittoComment:function(){var a="",b="",c="";a=$$(this),b=a.attr("data-id"),options={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,activity_id:b},c=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.sz_add_user_ditte,b="#comment-"+b,$.post(c,options,function(c){"Ditto"===c.text?(a.find("span").text(c.text),console.log(b),"undefined"==typeof c.response?$(b).find(".likes").text("0"):$(b).find(".likes").text(c.response),a.find(".fa").addClass("fa-thumbs-o-up").removeClass("fa-thumbs-o-down")):(a.find("span").text(c.text),"undefined"==typeof c.response?$(b).find(".likes").text("0"):$(b).find(".likes").text(c.response),a.find(".fa").addClass("fa-thumbs-o-down").removeClass("fa-thumbs-o-up")),console.log(c)})},closeCommentbox:function(){sezzwhoApp.comments.closePicker()},textWidget:function(){myApp.popup(".comment-popup"),$("#post-comment-text").attr("disabled",!0),$("#comment-textarea").keyup(function(){0!=$(this).val().length?$("#post-comment-text").attr("disabled",!1):$("#post-comment-text").attr("disabled",!0)})},post_text_comment:function(){var a=$("#comment-textarea").val();return sezzwhoApp.mainInits.getCharLength(a)<4?(sezzwhoApp.alert("Ah, Content is too short"),!1):(sezzwhoApp.comments.post_comment($("#comment-textarea").val()),sezzwhoApp.showPreloader("Submitting..."),void setTimeout(function(){sezzwhoApp.hidePreloader(),sezzwhoApp.closeModal(".comment-popup")},1500))},bindEvent:function(){var a=[{element:"#post-comment",event:"click",handler:this.initPost},{element:".record-comment",event:"click",handler:this.initRecording},{element:".comment-delete",event:"click",handler:this.deleteComment},{element:".comment-ditto",event:"click",handler:this.dittoComment},{element:".picker-1 .close-picker",event:"click",handler:this.closeCommentbox},{element:"#post-comment-text",event:"click",handler:this.post_text_comment}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.comments=comments;var notification={init:function(){this.notifications_unread_count(),this.getNotification()},notifications_unread_count:function(){var a={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.notifications_unread_count,a,"unreadCount")},displayCount:function(a){if(a.count>0)$("i.fa.fa-flag .badge").text(a.count);else{$("i.fa.fa-flag .badge").text("0");var b='<div class="none-comment"><i class="fa fa-exclamation-triangle fa-5x"></i><p>No New Notifications</p></div>';$(".notification-template").html(b)}},getNotification:function(){var a={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,component:sezzwhoApp.notificationsOptions,is_new:!0};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.notifications,a,"notification")},displayNotifications:function(a){var b=[],c=[],d=0;if(console.log(a),"undefined"!=typeof a.notifications){for(;d<a.notifications.length;)c[d]={nickname:a.notifications[d].sender_name,avatar:a.notifications[d].sender_avatar,time:a.notifications[d].time_since,content:a.notifications[d].content,href:a.notifications[d].href,componentname:a.notifications[d].component_name,account_type:a.notifications[d].account_type,refername:a.notifications[d].sender_name,itemid:a.notifications[d].item_id,senderid:"follow"===a.notifications[d].component_name?a.notifications[d].item_id:a.notifications[d].secondary_item_id,userid:a.notifications[d].user_id,notificationId:a.notifications[d].id,video_refer_name:a.notifications[d].video_refer_name},d++;b.push({item:c});var e=sezzwhoApp.mainInits.renderTpl(notificationTemplate,b[0]);$(".notification-template").html(e)}setTimeout(function(){sezzwhoApp.notifications.blindEvent()},1e3)},notifications_delete:function(){var a=$(this).attr("data-id");sezzwhoApp.nDel=a;var b={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,notification_id:a};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.notifications_single_mark,b,"notifications_delete")},notifications_delete_message:function(a){var b="#notification-"+sezzwhoApp.nDel;"ok"===a.status?(sezzwhoApp.notifications.notifications_unread_count(),$(b).remove()):myApp.addNotification({title:"Invaild",subtitle:"",message:a.error,media:'<i class="fa fa-info-circle"></i>'})},notifications_single_mark:function(a){sezzwhoApp.nMark=a;var b={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,notification_id:a};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.notifications_single_mark,b,"notifications_mark")},notifications_mark_message:function(a){var b="#notification-"+sezzwhoApp.nMark;"ok"===a.status?(sezzwhoApp.notifications.notifications_unread_count(),$(b).remove()):myApp.addNotification({title:"Invaild",subtitle:"",message:a.error,media:'<i class="fa fa-info-circle"></i>'})},refresh_notification:function(){},blindEvent:function(){var a=[{element:".notification-delete",event:"click",handler:this.notifications_delete}];sezzwhoApp.mainInits.bindEvents(a)},registerDeviceAndroid:function(){function a(a){console.log("result = "+a)}function b(a){console.log("error = "+a)}function c(a){console.log("device token = "+a)}pushNotification=new PushNotification,"android"==device.platform||"Android"==device.platform||"amazon-fireos"==device.platform?pushNotification.register(a,b,{senderID:"811636483141",ecb:"onNotification"}):"blackberry10"==device.platform?pushNotification.register(a,b,{invokeTargetId:"replace_with_invoke_target_id",appId:"replace_with_app_id",ppgUrl:"replace_with_ppg_url",ecb:"pushNotificationHandler",simChangeCallback:replace_with_simChange_callback,pushTransportReadyCallback:replace_with_pushTransportReady_callback,launchApplicationOnPush:!0}):pushNotification.register(c,b,{badge:"true",sound:"true",alert:"true",ecb:"onNotificationAPN"})},registerDeviceIOS:function(){push=PushNotification.init({android:{senderID:"982786196868"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}}),push.on("registration",function(a){console.log(a.registrationId),sezzwhoApp.notifications.deviceRegister(a.registrationId,"ios_notification")}),push.on("notification",function(a){sezzwhoApp.notifications.getNotification()}),push.on("error",function(a){})},unregisterDeviceIos:function(){function a(a){console.log(a)}function b(a){console.log(a)}push.unregister(a,b)},unregisterDeviceAndroid:function(){function a(a){console.log(a)}function b(a){console.log(a)}pushNotification.unregister(a,b)},deviceRegister:function(a,b){var c=sezzwhoApp.url+sezzwhoApp.sezzwhoAction.save_device_id,d={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,regID:a,type:b};$.get(c,d,function(a){console.log("ID register request performed")})},uploadVideoNotification:function(){sezzwhoApp.uploadToken,window.plugins.OneSignal.getIds(function(a){var b={contents:{en:"Your video is ready to view. You can now watch it."},include_player_ids:[a.userId]};window.plugins.OneSignal.postNotification(b,function(a){console.log("Notification Post Success:",a)},function(a){console.log("Notification Post Failed: ",a),alert("Notification Post Failed:\n"+JSON.stringify(a))})})}};sezzwhoApp.notifications=notification;var loadmore=!1,detailpage={init:function(a){sezzwhoApp.showIndicator(),this.blindEvent(),this.userProfileHeader(a.id),sezzwhoApp.homeModules.blindEvent(),sezzwhoApp.userDetail=a.username,sezzwhoApp.userIDetail=a.id,"Personal"===a.accountType?$(".business-recording, #tab-detial").hide():($(".business-recording, #auto-post-business, #tab-detial").show(),$("#auto-aw-whats-new-submit, #auto-add-business").hide()),sezzwhoApp.reviewpages.init()},userProfileHeader:function(a){var b={key:sezzwhoApp.jsonpcb,user_id:a,cookie:sezzwhoApp.cookie,field:"Bio,Website,Address"};sezzwhoApp.leaderid=a;var c=new Promise(function(b,c){b(sezzwhoApp.commonFunc.followingFollower(a)),console.log("first")});c.then(function(){sezzwhoApp.commonFunc.activitiesCount(a),console.log("2nd")}).then(function(){sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.xprofile,b,"detialpageheader"),console.log("3rd")}),this.getFeedActivities(a)},getPersonalFeed:function(a){var b=".user-profile-header-detail-"+sezzwhoApp.userIDetail;console.log(b);var c,d=a.Bio,e=a.Website,f=a.Address;c=sezzwhoApp.userloginInfo.user.id==sezzwhoApp.userIDetail,item={avatar:sezzwhoApp.mainInits.addhttp(a.avatar),bio:d,id:sezzwhoApp.leaderid,username:sezzwhoApp.userDetail,follower:a.followers,following:a.following,post_count:a.activityCount,is_follow:a.is_follow,address:f,website:sezzwhoApp.mainInits.addhttp(e),follow:c},output=sezzwhoApp.mainInits.renderTpl(userHeaderTemplate,item),$(b).html(output)},getFeedActivities:function(a){var b={key:sezzwhoApp.jsonpcb,user_id:a,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",comments:!0,scope:"just-me,mentions"};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,b,"detialpagelist"),setTimeout(function(){sezzwhoApp.homeModules.blindEvent()},1e3)},activitiesFeed:function(a){var b=[],c=[],d=".infinite-scroll-preloader-detail-page-"+sezzwhoApp.userIDetail,e=".presonal-content-detail-"+sezzwhoApp.userIDetail,f=".infinite-scroll-detail-"+sezzwhoApp.userIDetail,g='<div class="none-comment"><i class="fa fa-newspaper-o  fa-5x"></i><p>No Activities</p></div>';if("error"!==a.status||"No Activities found."!==a.error){for(var h=0;h<a.activities.length;h++)text=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[h].content),sezzwhoApp.activityFeedUserDetail=a,c[h]={nickname:a.activities[h].user[0].username,avatar:sezzwhoApp.mainInits.addhttp(a.activities[h].user[0].avatar),time:a.activities[h].time_since,user_id:a.activities[h].user[0].user_id,title:text.title,hashtag:text.hashtag,ziggeocode:text.ziggeoCode,type:"Member_review"==a.activities[h].type||"activity_update"==a.activities[h].type,commentLenght:"undefined"!=typeof a.activities[h].comments?a.activities[h].comments.length:0,comments:"undefined"!=typeof a.activities[h].comments,page:a.page,id:a.activities[h].activity_id,action:a.activities[h].action,name:"detailpage",likes_count:"string"==typeof a.activities[h].likes_count?0:Object.keys(a.activities[h].likes_count).length,like_button:a.activities[h].likes_button,refer_count:a.activities[h].refer_count,share_count:a.activities[h].share_count,is_follow:a.activities[h].followCheck,account_type:a.activities[h].user[0].account_type};b.push({item:c});var i=sezzwhoApp.mainInits.renderTpl(activityTemplate,b[0]);$(e).append(i),sezzwhoApp.hideIndicator(),sezzwhoApp.commonFunc.init()}else sezzwhoApp.hideIndicator(),myApp.detachInfiniteScroll($$(f)),$(e).html(g),$$(d).remove()},loadmoreFeedContent:function(){var a=".infinite-scroll-preloader-detail-page-"+sezzwhoApp.userIDetail,b=".infinite-scroll-detail-"+sezzwhoApp.userIDetail,c=!1,d=sezzwhoApp.activityFeedUserDetail.has_more_items,e=10,f=2;loadmore=!0,$$(b).on("infinite",function(){console.log("step2"),c||(c=!0,setTimeout(function(){if(c=!1,d=sezzwhoApp.activityFeedUserDetail.has_more_items,0==d)return console.log("step3"),myApp.detachInfiniteScroll($$(b)),void $$(a).remove();console.log("eer");var g={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userIDetail,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",page:f,per_page:e,comments:!0};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,g,"loadmoreDetailActivity"),console.log(sezzwhoApp.activityFeedUserDetail.has_more_items),1==sezzwhoApp.activityFeedUserDetail.has_more_items?(f+=1,d=!0):d=!1},1e3))})},post_update:function(a){var b={content:a};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_post_update,b,"post_update")},response_post_update:function(a){},recordVideo:function(a){captureVideo()},businessPostReview:function(){var a,b="",c="",d="",e="",f="";if(sezzwhoApp.postButton=!1,sezzwhoApp.addLocationButton=!1,sezzwhoApp.addReviewButton=!0,sezzwhoApp.autoWhatsNew=!1,""==$("#video-title").val()?$("#video-title").addClass("danger-alert"):$("#video-title").removeClass("danger-alert"),""==$("#autocomplete-user").val()?$("#autocomplete-user").addClass("danger-alert"):$("#video-title").removeClass("danger-alert"),b=sezzwhoApp.mainInits.matchUrl($$("#video-title").val()),d=$$("#rating").val(),d<3)return myApp.alert("please select more than 3 star"),!1;c=$$("#videocontent").val();try{e=$("#autocomplete-user").val().replace(/["~!$%^&*\(\)_+=`{}\[\]\|\\:;'<>,.\/?"\-]+/g,"").match(/(?:\#(\w+))|(?:\@(\w+))/g).toString().replace(/,/g," ")}catch(g){return alert("Please add #/@ front of word"),!1}if(f=""===$("#autocomplete-website").val()||$("#autocomplete-website").val(),a={avatar:sezzwhoApp.userloginInfo.user.avatar,username:sezzwhoApp.userloginInfo.user.username,userid:sezzwhoApp.userloginInfo.user.id,videotitle:b,rating:d,hashtag:e,video:c,link:f},a.usercheck=sezzwhoApp.userIDetail,a.usernameR=sezzwhoApp.userDetail,sezzwhoApp.reviewContent=a,sezzwhoApp.isUploaded)$("#auto-post-business i").addClass("fa-spinner fa-spin  fa-fw").removeClass("fa-pencil-square-o"),setTimeout(function(){$("#auto-post-business i").removeClass("fa-spinner fa-spin  fa-fw").addClass("fa-pencil-square-o")},3e3),sezzwhoApp.reviewContent.video=$$("#videocontent").val(),sezzwhoApp.addbusiness.postBusinessReview();else if(sezzwhoApp.autoWhatsNew=!0,$$(".popup-record.modal-in").length>0)return myApp.closeModal(".popup-record"),sezzwhoApp.isStillUploading=!0,myApp.addNotification({title:"Uploading...",message:"Stay tuned, uploading....",hold:3e3}),!1},popupRecording:function(){sezzwhoApp.popup(".popup-record"),star_rating()},blindEvent:function(){var a=[{element:"#auto-post-business",event:"click",handler:this.businessPostReview},{element:".business-recording",event:"click",handler:this.popupRecording}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.detailpages=detailpage;var review={init:function(){this.getFeedActivities()},getFeedActivities:function(){var a={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userIDetail,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",comments:!0,review:!0,scope:"mentions"};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,a,"reviewpagelist"),setTimeout(function(){sezzwhoApp.homeModules.blindEvent()},1e3)},activitiesReviewFeed:function(a){var b=[],c=[],d=".presonal-content-review-"+sezzwhoApp.userIDetail,e=".infinite-scroll-preloader-review-page-"+sezzwhoApp.userIDetail,f=".infinite-scroll-review-"+sezzwhoApp.userIDetail,g='<div class="none-comment"><i class="fa fa-newspaper-o  fa-5x"></i><p>No Activities</p></div>';if(sezzwhoApp.activityFeedUserReview=[],sezzwhoApp.activityFeedUserReview.has_more_items=!1,"error"!==a.status||"No Activities found."!==a.error){for(var h=0;h<a.activities.length;h++)text=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[h].content),sezzwhoApp.activityFeedUserReview=a,c[h]={nickname:a.activities[h].user[0].username,avatar:sezzwhoApp.mainInits.addhttp(a.activities[h].user[0].avatar),time:a.activities[h].time_since,user_id:a.activities[h].user[0].user_id,title:text.title,hashtag:text.hashtag,ziggeocode:text.ziggeoCode,type:"Member_review"==a.activities[h].type||"activity_update"==a.activities[h].type,commentLenght:"undefined"!=typeof a.activities[h].comments?a.activities[h].comments.length:0,comments:"undefined"!=typeof a.activities[h].comments,page:a.page,id:a.activities[h].activity_id,action:a.activities[h].action,name:"detailpage",likes_count:"string"==typeof a.activities[h].likes_count?0:Object.keys(a.activities[h].likes_count).length,like_button:a.activities[h].likes_button,refer_count:a.activities[h].refer_count,share_count:a.activities[h].share_count,is_follow:a.activities[h].followCheck,account_type:a.activities[h].user[0].account_type};b.push({item:c});var i=sezzwhoApp.mainInits.renderTpl(activityTemplate,b[0]);$(d).append(i),sezzwhoApp.hideIndicator(),sezzwhoApp.commonFunc.init()}else sezzwhoApp.hideIndicator(),myApp.detachInfiniteScroll($$(f)),$(d).html(g),$$(e).remove()},loadmoreFeedContent:function(){var a=".infinite-scroll-preloader-review-page-"+sezzwhoApp.userIDetail,b=".infinite-scroll-review-"+sezzwhoApp.userIDetail;console.log("step1");var c=!1,d=sezzwhoApp.activityFeedUserReview.has_more_items,e=10,f=2;loadmore=!0,$$(b).on("infinite",function(){console.log("step2"),c||(c=!0,setTimeout(function(){if(c=!1,d=sezzwhoApp.activityFeedUserReview.has_more_items,0==d)return console.log("step3"),myApp.detachInfiniteScroll($$(b)),void $$(a).remove();console.log("eer");var g={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.userIDetail,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",page:f,per_page:e,comments:!0,review:!0};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,g,"loadmoreReviewActivity"),console.log(sezzwhoApp.activityFeedUserReview.has_more_items),1==sezzwhoApp.activityFeedUserReview.has_more_items?(f+=1,d=!0):d=!1},1e3))})}};sezzwhoApp.reviewpages=review;var searchTimeout,mySearchbar,search={init:function(){this.bindEvent()},searchuser:function(){myApp.autocomplete({opener:$$("#autocomplete-user"),openIn:"popup",preloader:!0,backOnSelect:!0,valueProperty:"user_id",textProperty:"username",limit:20,source:function(a,b,c){var d=[];return 0===b.length?void c(d):(a.showPreloader(),void $$.ajax({url:sezzwhoApp.url+"members",method:"GET",dataType:"json",data:{search_terms:b,key:sezzwhoApp.jsonpcb},success:function(b){for(var e=0;e<b.members.length;e++)d.push(b.members[e].username);a.hidePreloader(),c(d)}}))},onChange:function(a,b){$$("#autocomplete-user").find(".item-after").text("@"+b[0]),$$("#autocomplete-user").find("input").val("@"+b[0]),$("#refer-user").prop("disabled",!1)}})},initSearchbar:function(){mySearchbar=myApp.searchbar(".searchbar.custom-search",{customSearch:!0,onDisable:function(a){$$('.popup-search input[type="search"]')[0].blur(),myApp.closeModal(".popup-search")},onSearch:function(a,b){sezzwhoApp.searchs.searchQuery(a.query)},onClear:function(a){$$(".popup-search .search-results").html(""),$$(".popup-search .search-results-activity").html("")}}),myApp.popup(".popup-search"),$$(".popup").on("open",function(){mySearchbar.enable()}),$$(".popup").on("opened",function(){$$('.popup-search input[type="search"]')[0].focus()})},searchQuery:function(a){return console.log("step2"),""===a.trim()?($$(".popup-search .search-results-activity").html(""),void $$(".popup-search .search-results").html("")):(searchTimeout&&clearTimeout(searchTimeout),$$(".popup-search .preloader").show(),void(searchTimeout=setTimeout(function(){var b={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,search_terms:encodeURIComponent(a)};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.members,b,"searchResult"),sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,b,"searchResult")},300)))},bboss_global_search_ajax:function(a){sezzwhoApp.homeUrl+"search_term="+a+"&nonce=daf1b135ca";$.ajax({url:sezzwhoApp.homeUrl,type:"POST",dataType:"JSON",data:{action:"bboss_global_search_ajax",nonce:"daf1b135ca",search_term:a},success:function(a){console.log(a),$$(".popup-search .preloader").hide()}})},displayResult:function(a){$$(".popup-search .preloader").hide();var b;if("ok"===a.status&&"undefined"!=typeof a.members)b=sezzwhoApp.mainInits.renderTpl(searchTemplate,a.members),$$(".popup-search .search-results").html(b),sezzwhoApp.searchs.init();else if("error"!==a.status){for(var c=[],d=[],e=0;e<a.activities.length;e++)text=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[e].content),d[e]={nickname:a.activities[e].user[0].display_name,avatar:a.activities[e].user[0].avatar,user_id:a.activities[e].user[0].user_id,time:a.activities[e].time_since,title:text.title,hashtag:text.hashtag,ziggeocode:text.ziggeoCode,type:"Member_review"==a.activities[e].type||"activity_update"==a.activities[e].type,commentLenght:"undefined"!=typeof a.activities[e].comments?a.activities[e].comments.length:0,comments:"undefined"!=typeof a.activities[e].comments,page:a.page,id:a.activities[e].activity_id,action:a.activities[e].action,name:"personal",likes_count:"string"==typeof a.activities[e].likes_count?0:Object.keys(a.activities[e].likes_count).length,like_button:a.activities[e].likes_button,refer_count:a.activities[e].refer_count,web_link:""!==a.activities[e].web_link&&sezzwhoApp.mainInits.matchUrl(a.activities[e].web_link),location:a.activities[e].location===!0&&sezzwhoApp.mainInits.mapUrl(a.activities[e].address),share_count:a.activities[e].share_count,is_follow:a.activities[e].followCheck,account_type:a.activities[e].user[0].account_type};c.push({item:d}),b=sezzwhoApp.mainInits.renderTpl(activityTemplate,c[0]),$$(".popup-search .search-results-activity").html(b),sezzwhoApp.commonFunc.blindEvent()}},bindEvent:function(){var a=[{element:"#following-search input, #personal-search input,#detail-search input,#follower-search-list input,#following-search-list input",event:"focus",handler:this.initSearchbar},{element:".search-follow",event:"click",handler:sezzwhoApp.homeModules.startStopFollowing},{element:".sezzwho-searchbar",event:"click",handler:this.initSearchbar}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.searchs=search;var obj=[],addbusiness={init:function(){this.bindEvent()},businessPage:function(){var a,b="",c="",d="",e="",f="";if(sezzwhoApp.postButton=!1,sezzwhoApp.addLocationButton=!0,sezzwhoApp.addReviewButton=!1,sezzwhoApp.autoWhatsNew=!1,sezzwhoApp.backAddbusiness=!0,""==$("#video-title").val()?$("#video-title").addClass("danger-alert"):$("#video-title").removeClass("danger-alert"),""==$("#autocomplete-user").val()?$("#autocomplete-user").addClass("danger-alert"):$("#video-title").removeClass("danger-alert"),b=sezzwhoApp.mainInits.matchUrl($$("#video-title").val()),d=$$("#rating").val(),d<3)return myApp.alert("please select more than 3 star"),!1;c=$$("#videocontent").val();try{e=$("#autocomplete-user").val().replace(/["~!$%^&*\(\)_+=`{}\[\]\|\\:;'<>,.\/?"\-]+/g,"").match(/(?:\#(\w+))|(?:\@(\w+))/g).toString().replace(/,/g," ")}catch(g){return alert("Please add #/@ front of word"),!1}return f=""===$("#autocomplete-website").val()||$("#autocomplete-website").val(),a={avatar:sezzwhoApp.userloginInfo.user.avatar,username:sezzwhoApp.userloginInfo.user.username,userid:sezzwhoApp.userloginInfo.user.id,videotitle:b,rating:d,hashtag:e,video:c,link:f},mainView.router.load({url:sezzwhoApp.pageUrl+"addbusiness.html",force:!0,context:a}),$$(".popup-record.modal-in").length>0?(myApp.closeModal(".popup-record"),!1):void 0},closePopup:function(){if(sezzwhoApp.embedding.reset(),$$(".demo-progressbar-load-hide").html('<p style="height:2px"></p>'),$$(".record-input").val(""),$$("#review-rating img").attr("src","images/star_off.png"),$$("#post-a-review,#auto-post-a-review").attr("disabled","disabled"),$$("input#rating").attr("value",0),$("#auto-add-business,#auto-aw-whats-new-submit,#auto-post-business").prop("disabled",!0),$(".auto-post input").prop("checked",!1),sezzwhoApp.autoWhatsNew=!1,sezzwhoApp.isUploading=!1,sezzwhoApp.isUploaded=!1,sezzwhoApp.isStillUploading=!1,$$(".popup-record.modal-in").length>0)return myApp.closeModal(".popup-record"),!1},initMap:function(){function a(a,b){var c=document.getElementById(a);c.addEventListener("click",function(){e.setTypes(b)})}var b=new google.maps.Map(document.getElementById("map"),{center:{lat:-33.8688,lng:151.2195},zoom:13}),c=document.getElementById("pac-input"),d=document.getElementById("type-selector");b.controls[google.maps.ControlPosition.TOP_LEFT].push(c),b.controls[google.maps.ControlPosition.TOP_LEFT].push(d);var e=new google.maps.places.Autocomplete(c);e.bindTo("bounds",b);var f=new google.maps.InfoWindow,g=new google.maps.Marker({map:b,anchorPoint:new google.maps.Point(0,(-29))});e.addListener("place_changed",function(){f.close(),g.setVisible(!1);var a=e.getPlace();if(!a.geometry)return void window.alert("Autocomplete's returned place contains no geometry");a.geometry.viewport?b.fitBounds(a.geometry.viewport):(b.setCenter(a.geometry.location),b.setZoom(17)),g.setIcon({url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}),g.setPosition(a.geometry.location),g.setVisible(!0);var c="";a.address_components&&(c=[a.address_components[0]&&a.address_components[0].short_name||"",a.address_components[1]&&a.address_components[1].short_name||"",a.address_components[2]&&a.address_components[2].short_name||""].join(" ")),f.setContent("<div><strong>"+a.name+"</strong><br>"+c),f.open(b,g)}),a("changetype-all",[]),a("changetype-address",["address"]),a("changetype-establishment",["establishment"]),a("changetype-geocode",["geocode"])},autoComplete:function(a){obj=a;var b="https://maps.googleapis.com/maps/api/place/autocomplete/json?location=54.7226785,-113.7223949&key=AIzaSyBLD3-k-NncJrejPdZsx_82iqY6RN_ZbR4";myApp.autocomplete({openIn:"page",opener:$$("#autocomplete-standalone-ajax"),valueProperty:"id",multiple:!1,textProperty:"description",limit:50,backOnSelect:!0,preloader:!0,source:function(a,c,d){var e=[];return 0===c.length?void d(e):(a.showPreloader(),void $$.ajax({url:b,method:"GET",dataType:"json",data:{input:c},success:function(b){for(var c=0;c<b.predictions.length;c++)e.push(b.predictions[c]);a.hidePreloader(),d(e)}}))},onChange:function(b,c){$$("#autocomplete-standalone-ajax").find(".item-after").text(c[0].description),$$("#autocomplete-standalone-ajax").find("input").val(c[0].description),sezzwhoApp.addbusiness.registerBusiness(c[0].description,a)}})},registerBusiness:function(a,b){txtInput=a.split(",");var c=txtInput[0],d=$("#businestype").val();console.log(c);var e=a;""!=c&&""!=e&&(sezzwhoApp.showIndicator(),jQuery.ajax({url:sezzwhoApp.homeUrl,type:"POST",dataType:"JSON",data:{action:"wow_registration_page",tagbusiness:c,type:d,loc:e},success:function(a){console.log(a.username),b.usercheck=a.userid,b.usernameR=a.username,sezzwhoApp.reviewContent=b,sezzwhoApp.hideIndicator(),$("#post-a-review,#auto-post-a-review").attr("disabled",!1)}}))},postBusinessReview:function(){console.log(sezzwhoApp.reviewContent);var a={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,content:sezzwhoApp.reviewContent};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_post_update_review,a,"postBusinessReview")},postAutoBusinessReview:function(){if(console.log(sezzwhoApp.reviewContent),sezzwhoApp.isUploaded){$("#auto-post-a-review i").addClass("fa-spinner fa-spin  fa-fw").removeClass("fa-video-camera"),setTimeout(function(){$("#auto-post-a-review i").removeClass("fa-spinner fa-spin  fa-fw").addClass("fa-video-camera")},3e3),sezzwhoApp.reviewContent.video=$$("#videocontent").val();var a={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,content:sezzwhoApp.reviewContent};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.activities_post_update_review,a,"postBusinessReview")}else sezzwhoApp.isStillUploading=!0,sezzwhoApp.autoWhatsNew=!0,sezzwhoApp.backAddbusiness=!1,mainView.router.back(),myApp.addNotification({title:"Uploading...",message:"Stay tuned, uploading....",hold:3e3})},doneReview:function(a){"ok"==a.status?(myApp.addNotification({title:"Sezzwho",subtitle:"Post Updated",hold:7e3,button:{text:"close",color:"red",close:!0},message:"Post updated successfully",media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'}),sezzwhoApp.personalFeeds.getFeedActivities(),sezzwhoApp.homeModules.refreshActivities(),sezzwhoApp.popularVideos.getPopularVideo(),sezzwhoApp.addbusiness.closePopup(),sezzwhoApp.backAddbusiness&&mainView.router.back()):myApp.addNotification({title:"Sezzwho",subtitle:"Notification",message:a.error,media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'})},bindEvent:function(){var a=[{element:"#add-business",event:"click",handler:this.businessPage},{element:"#post-a-review",event:"click",handler:this.postBusinessReview},{element:"#auto-add-business",event:"click",handler:this.businessPage},{element:"#auto-post-a-review",event:"click",handler:this.postAutoBusinessReview}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.addbusiness=addbusiness;var ProfileComponent,profile={init:function(){this.blindEvent(),this.reactInit()},profileEdit:function(){},profileSave:function(){},reactInit:function(){requirejs(["build/profile/profileReact"],function(a){a.initProfile()})},blindEvent:function(){var a=[{element:".edit",event:"click",handler:this.profileEdit},{element:".save",event:"click",handler:this.profileSave}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.profiles=profile;var setting={init:function(){isAndroid?requirejs(["build/setting/settingReact"],function(a){a.initSetting()}):requirejs(["build/setting/settingReact-ios"],function(a){a.initSetting()})},updateSetting:function(){},updatePassword:function(){console.log("change password");var a={key:sezzwhoApp.jsonpcb,cookie:sezzwhoApp.cookie,password:document.getElementById("confirm_password").value};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.update_password,a,"changePassword")},responseUpdatePassword:function(a){"ok"===a.status&&myApp.addNotification({title:"Change Password",subtitle:"Password Updated",message:"Password updated successfully",media:'<img width="44" height="44" style="border-radius:100%" src="images/sezz-bar-logo.png">'})},initPasswordValidate:function(){function a(){b.value!=c.value?(c.style.color="red",$("#sezzwho-update-password").attr("disabled",!0)):(c.style.color="black",$("#sezzwho-update-password").attr("disabled",!1))}var b=document.getElementById("password"),c=document.getElementById("confirm_password");document.getElementById("sezzwho-update-password");b.onchange=a,c.onkeyup=a},bindEvent:function(){var a=[{element:"#sezzwho-update-setting",event:"click",handler:this.updateSetting},{element:".sezzwho-update-password",event:"click",handler:this.updatePassword}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.settings=setting;var register={init:function(){requirejs(["build/register/registerReact"],function(a){a.initRegister()})},registerUser:function(){},bindEvent:function(){var a=[{element:"#sezzwho-new-user",event:"click",handler:this.registerUser}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.registers=register;var popularVideo={init:function(a){this.getPopularVideo()},getPopularVideo:function(){var a={key:sezzwhoApp.jsonpcb,user_id:0,cookie:sezzwhoApp.cookie,type:"activity_update,Member_review",comments:!0,limit:15};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.following,a,"popular_video")},displayVideo:function(a){if(console.log(a),"error"!==a.status){for(var b=[],c=[],d=[],e="",f=0;f<a.activities.length;f++)d=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[f].content),e=d.title,e=e.replace(/\\/g,""),c[f]={nickname:a.activities[f].user[0].display_name,avatar:a.activities[f].user[0].avatar,user_id:a.activities[f].user[0].user_id,time:a.activities[f].time_since,title:e,hashtag:d.hashtag,ziggeocode:d.ziggeoCode,type:"Member_review"==a.activities[f].type||"activity_update"==a.activities[f].type,commentLenght:"undefined"!=typeof a.activities[f].comments?a.activities[f].comments.length:0,comments:"undefined"!=typeof a.activities[f].comments,page:a.page,id:a.activities[f].activity_id,action:a.activities[f].action,name:"personal",star:a.activities[f].star,
likes_count:"string"==typeof a.activities[f].likes_count?0:Object.keys(a.activities[f].likes_count).length,like_button:a.activities[f].likes_button,refer_count:a.activities[f].refer_count,web_link:sezzwhoApp.mainInits.matchUrl(a.activities[f].web_link),popular:!0,location:a.activities[f].location===!0&&sezzwhoApp.mainInits.mapUrl(a.activities[f].address),share_count:a.activities[f].share_count,is_follow:a.activities[f].followCheck,account_type:a.activities[f].user[0].account_type};b.push({item:c});var g=sezzwhoApp.mainInits.renderTpl(activityTemplate,b[0]);$$("#popular-vidoes").html(g)}else $("#popular-vidoes").html("");sezzwhoApp.commonFunc.init()},initSlider:function(){myApp.swiper(".swiper-3",{pagination:".swiper-3 .swiper-pagination",spaceBetween:10,slidesPerView:2})},blindEvent:function(){var a=[{element:"",event:"click",handler:""}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.popularVideos=popularVideo;var videodetail={init:function(a){console.log(a),this.videoInit(a),sezzwhoApp.comments.singlePage=!1,this.commentDetail(a),sezzwhoApp.comments.bindEvent()},videoInit:function(a){var b="http://embed.ziggeo.com/v1/applications/ddd4366d3fc0baef95c333fa575c53f9/videos/"+a.ziggeocode+"/video.mp4?effect_profile=ba51b5e2f51692f07abe8f49bd4b56c3";"http://embed.ziggeo.com/v1/applications/ddd4366d3fc0baef95c333fa575c53f9/videos/"+a.ziggeocode+"/image?effect_profile=ba51b5e2f51692f07abe8f49bd4b56c3";flowplayer.conf={native_fullscreen:!0},flowplayer("#overlay",{ima:{adtest:!0,description_url:location.href,ads:[{time:3,ad_type:"image_text"}]},splash:!0,ratio:9/16,rtmp:"rtmp://s3b78u0kbtx79q.cloudfront.net/cfx/st",embed:{skin:"http://releases.flowplayer.org/7.0.2/skin/minimalist.css"},clip:{sources:[{type:"video/mp4",src:b}]}})},commentDetail:function(a){sezzwhoApp.commentsType=[{id:a.id,type:a.name,page:a.page,user_id:a.user_id}],sezzwhoApp.comments.getJsonComments(a),setTimeout(function(){sezzwhoApp.comments.bindEvent(),$(".preloader").remove()},3e3)}};sezzwhoApp.videodetails=videodetail;var singleActivity={init:function(a){var b=this;this.blindEvent(),b.getSingleActivity(a.item),sezzwhoApp.notifications.notifications_single_mark(a.markID),setTimeout(function(){sezzwhoApp.commonFunc.blindEvent()},1e3)},getSingleActivity:function(a){var b={key:sezzwhoApp.jsonpcb,include:a,cookie:sezzwhoApp.cookie,user_id:sezzwhoApp.userloginInfo.user.id};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.sz_single_activity_post,b,"singlePage")},displayActivity:function(a){var b=[],c=[],d='<div class="none-comment"><i class="fa fa-newspaper-o  fa-5x"></i><p>Oops! This activity has been deleted.</p></div>',e=$(".single-result");if(sezzwhoApp.singleData=a,"error"!==a.status){for(var f=0;f<a.activities.length;f++)text=sezzwhoApp.mainInits.getsezzwhoContents(a.activities[f].content),c[f]={nickname:a.activities[f].user[0].username,avatar:a.activities[f].user[0].avatar,user_id:a.activities[f].user[0].user_id,time:a.activities[f].time_since,title:text.title,hashtag:text.hashtag,ziggeocode:text.ziggeoCode,type:"Member_review"==a.activities[f].type||"activity_update"==a.activities[f].type,commentLenght:"undefined"!=typeof a.activities[f].comments?a.activities[f].comments.length:0,comments:"undefined"!=typeof a.activities[f].comments,page:a.page,id:a.activities[f].activity_id,action:a.activities[f].action,name:"Activity",likes_count:"string"==typeof a.activities[f].likes_count?0:Object.keys(a.activities[f].likes_count).length,like_button:a.activities[f].likes_button,refer_count:a.activities[f].refer_count,web_link:sezzwhoApp.mainInits.matchUrl(a.activities[f].web_link),location:a.activities[f].location===!0&&sezzwhoApp.mainInits.mapUrl(a.activities[f].address),share_count:a.activities[f].share_count,is_follow:a.activities[f].followCheck,account_type:a.activities[f].user[0].account_type},f++;b.push({item:c});var g=sezzwhoApp.mainInits.renderTpl(activityTemplate,b[0]);e.html(g)}else e.html(d)},blindEvent:function(){var a=[{element:"",event:"click",handler:""}];sezzwhoApp.mainInits.bindEvents(a)}};sezzwhoApp.singlePage=singleActivity;var lostPassword={init:function(){this.blindEvent()},blindEvent:function(){var a=[{element:"#wp-submit",event:"click",handler:sezzwhoApp.commonFunc.lostSezzwhoPassword}];mainInit.bindEvents(a)}};sezzwhoApp.lostPasswords=lostPassword;var followingList={init:function(a){this.getFollowingList(a)},getFollowingList:function(a){sezzwhoApp.followingList.user_id=a.id;var b={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.followingList.user_id,cookie:sezzwhoApp.cookie,per_page:10,page:1};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.sz_following_list,b,"followingList")},displayFollowingList:function(a){if("error"!==a.status){var b=(a.page-1)*a.per_page,c=1===a.page?a.list.length:(a.page-1)*Object.keys(a.list).length+a.per_page;sezzwhoApp.followingList.followingResponse=a,sezzwhoApp.followingList.has_more_items=a.has_more_items;var d=[],e=[];for(i=0,b;b<c;b++)e[i]={username:a.list[b].data.user_login,user_id:a.list[b].data.ID,user_registered:a.list[b].data.user_registered,avatar:sezzwhoApp.mainInits.addhttp(a.list[b].data.avatar),bio:a.list[b].data.bio,count:a.list[b].data.counts,nickname:a.list[b].data.display_name,account_type:a.list[b].data.accountType},i++;d.push({item:e});var f=sezzwhoApp.mainInits.renderTpl(followingTemplate,d[0]);$(".following-list").append(f),a.total_limit<10&&$$(".infinite-scroll-preloader-following-list").remove()}else $(".following-list").html("<span class='no-following-list'>No following</span>"),$$(".infinite-scroll-preloader-following-list").remove();sezzwhoApp.hideIndicator()},loadmore:function(){var a=!1,b=sezzwhoApp.followingList.has_more_items,c=10,d=2;loadmore=!0,$$(".infinite-scroll-following-list").on("infinite",function(){a||(a=!0,setTimeout(function(){if(a=!1,b=sezzwhoApp.followingList.has_more_items,0==b)return myApp.detachInfiniteScroll($$(".infinite-scroll-following-list")),void $$(".infinite-scroll-preloader-following-list").remove();var e={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.followingList.user_id,cookie:sezzwhoApp.cookie,page:d,per_page:c};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.sz_following_list,e,"followingLoadMore"),1==sezzwhoApp.followingList.has_more_items?(d+=1,b=!0):b=!1},1e3))})}};sezzwhoApp.followingList=followingList;var followerList={init:function(a){this.getFollowerList(a)},getFollowerList:function(a){sezzwhoApp.followerList.user_id=a.id;var b={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.followerList.user_id,cookie:sezzwhoApp.cookie,per_page:10,page:1};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.sz_follower_list,b,"followerList")},displayFollowerList:function(a){if("error"!==a.status){var b=(a.page-1)*a.per_page,c=1===a.page?a.list.length:(a.page-1)*Object.keys(a.list).length+a.per_page;sezzwhoApp.followerList.followerResponse=a,sezzwhoApp.followerList.has_more_items=a.has_more_items;var d=[],e=[];for(i=0,b;b<c;b++)e[i]={username:a.list[b].data.user_login,user_id:a.list[b].data.ID,user_registered:a.list[b].data.user_registered,avatar:sezzwhoApp.mainInits.addhttp(a.list[b].data.avatar),bio:a.list[b].data.bio,count:a.list[b].data.counts,nickname:a.list[b].data.display_name,account_type:a.list[b].data.accountType},i++;d.push({item:e});var f=sezzwhoApp.mainInits.renderTpl(followerTemplate,d[0]);$(".follower-list").append(f),a.total_limit<10&&$$(".infinite-scroll-preloader-follower").remove()}else $(".follower-list").html("<span class='no-follower-list'>No follower</span>"),$$(".infinite-scroll-preloader-follower").remove();sezzwhoApp.hideIndicator()},loadmore:function(){var a=!1,b=sezzwhoApp.followerList.has_more_items,c=10,d=2;loadmore=!0,$$(".infinite-scroll-follower").on("infinite",function(){a||(a=!0,setTimeout(function(){if(a=!1,b=sezzwhoApp.followerList.has_more_items,0==b)return myApp.detachInfiniteScroll($$(".infinite-scroll-follower")),void $$(".infinite-scroll-preloader-follower").remove();var e={key:sezzwhoApp.jsonpcb,user_id:sezzwhoApp.followerList.user_id,cookie:sezzwhoApp.cookie,page:d,per_page:c};sezzwhoApp.xhrs.simpleCall(sezzwhoApp.url,sezzwhoApp.sezzwhoAction.sz_follower_list,e,"followerLoadMore"),1==sezzwhoApp.followerList.has_more_items?(d+=1,b=!0):b=!1},1e3))})}};sezzwhoApp.followerList=followerList;var GlobalLat=null,GlobalLong=null,geolocation={initGeo:function(){$$("#geoInfo").removeClass("show").hide(),$$("#geoInfo .location>i").removeClass("ios7-location-outline").addClass("preloader"),$$("#geoInfo .location>span").html(i18n.geo.loading_geo),GlobalLat=null,GlobalLong=null},catchGeoInfo:function(){$$("#geoInfo").addClass("show").show(),navigator.geolocation?navigator.geolocation.getCurrentPosition(geolocation.showPosition,geolocation.showGeoError):$$("#geoInfo .location").html(i18n.geo.position_unavailable)},showPosition:function(a){var b=a.coords.latitude,c=a.coords.longitude;$$("#geoInfo .location>i").removeClass("preloader").addClass("ios7-location-outline"),$$("#geoInfo .location>span").html(Math.round(1e4*b)/1e4+"/"+Math.round(1e4*c)/1e4),GlobalLat=b,GlobalLong=c},showGeoError:function(a){switch(a.code){case a.PERMISSION_DENIED:$$("#geoInfo .location").html(i18n.geo.permission_denied);break;case a.POSITION_UNAVAILABLE:$$("#geoInfo .location").html(i18n.geo.position_unavailable);break;case a.TIMEOUT:$$("#geoInfo .location").html(i18n.geo.timeout);break;case a.UNKNOWN_ERROR:$$("#geoInfo .location").html(i18n.error.unknown_error)}},getGeo:function(){return{lat:GlobalLat,"long":GlobalLong}},cleanGeo:function(){hiApp.confirm(i18n.geo.confirm_clean_geo,geolocation.initGeo)}};sezzwhoApp.geolocation=geolocation,ZiggeoApi.Events.on("uploading",function(a){if(console.log("uploading"),sezzwhoApp.embedding=ZiggeoApi.Embed.get("ziggeo_replace_me"),sezzwhoApp.isUploading=!0,$("#auto-aw-whats-new-submit,#auto-add-business,#auto-post-business").prop("disabled",!1),sezzwhoApp.autoWhatsNew&&$$(".popup-record.modal-in").length>0)return myApp.closeModal(".popup-record"),myApp.addNotification({title:"Uploading...",message:"Stay tuned, uploading....",hold:3e3}),!1}),ZiggeoApi.Events.on("submitted",function(a){console.log(a.video.streams[3]),sezzwhoApp.isUploaded=!0,video_code='<ziggeo ziggeo-width="320" ziggeo-height="240" ziggeo-auto_crop="true" ziggeo-effect_profile="ba51b5e2f51692f07abe8f49bd4b56c3" ziggeo-video_profile="a9068e8d98ff6d36dd3ec66f35986d0c"  ziggeo-responsive="true" ziggeo-video="'+a.video.token+'"></ziggeo>';var b={};b[0]=$$("#videocontent"),b[1]=$("#aw-whats-new-submit,#add-business,#post-business"),b[2]=$$("#videobusiness"),b[0].val(video_code),b[2].val(a.video.token),sezzwhoApp.autoWhatsNew&&sezzwhoApp.postButton?(sezzwhoApp.personalFeeds.initPostData(),sezzwhoApp.notifications.uploadVideoNotification()):sezzwhoApp.autoWhatsNew&&sezzwhoApp.addLocationButton?(sezzwhoApp.reviewContent.video=video_code,sezzwhoApp.addbusiness.postBusinessReview(),sezzwhoApp.notifications.uploadVideoNotification()):sezzwhoApp.autoWhatsNew&&sezzwhoApp.addReviewButton&&(sezzwhoApp.detailpages.businessPostReview(),sezzwhoApp.notifications.uploadVideoNotification())});